{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=19)}([function(e,t,n){\"use strict\";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(16),i={};function s(){}function c(e){for(var t=e.length,n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t,n){try{return e.f(t)}catch(e){return n._e(e),i}}t.NO=i;var l={_n:s,_e:s,_c:s};function u(e){e._start=function(e){e.next=e._n,e.error=e._e,e.complete=e._c,this.start(e)},e._stop=e.stop}t.NO_IL=l;var p=function(){function e(e,t){this._stream=e,this._listener=t}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),d=function(){function e(e){this._listener=e}return e.prototype.next=function(e){this._listener._n(e)},e.prototype.error=function(e){this._listener._e(e)},e.prototype.complete=function(){this._listener._c()},e}(),m=function(){function e(e){this.type=\"fromObservable\",this.ins=e,this.active=!1}return e.prototype._start=function(e){this.out=e,this.active=!0,this._sub=this.ins.subscribe(new d(e)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),f=function(){function e(e){this.type=\"merge\",this.insArr=e,this.out=i,this.ac=0}return e.prototype._start=function(e){this.out=e;var t=this.insArr,n=t.length;this.ac=n;for(var r=0;r<n;r++)t[r]._add(this)},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=0;n<t;n++)e[n]._remove(this);this.out=i},e.prototype._n=function(e){var t=this.out;t!==i&&t._n(e)},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){if(--this.ac<=0){var e=this.out;if(e===i)return;e._c()}},e}(),g=function(){function e(e,t,n){this.i=e,this.out=t,this.p=n,n.ils.push(this)}return e.prototype._n=function(e){var t=this.p,n=this.out;if(n!==i&&t.up(e,this.i)){for(var r=t.vals,o=r.length,a=Array(o),s=0;s<o;++s)a[s]=r[s];n._n(a)}},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.p;e.out!==i&&0==--e.Nc&&e.out._c()},e}(),b=function(){function e(e){this.type=\"combine\",this.insArr=e,this.out=i,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(e,t){var n=this.vals[t],r=this.Nn?n===i?--this.Nn:this.Nn:0;return this.vals[t]=e,0===r},e.prototype._start=function(e){this.out=e;var t=this.insArr,n=this.Nc=this.Nn=t.length,r=this.vals=new Array(n);if(0===n)e._n([]),e._c();else for(var o=0;o<n;o++)r[o]=i,t[o]._add(new g(o,e,this))},e.prototype._stop=function(){for(var e=this.insArr,t=e.length,n=this.ils,r=0;r<t;r++)e[r]._remove(n[r]);this.out=i,this.ils=[],this.vals=[]},e}(),v=function(){function e(e){this.type=\"fromArray\",this.a=e}return e.prototype._start=function(e){for(var t=this.a,n=0,r=t.length;n<r;n++)e._n(t[n]);e._c()},e.prototype._stop=function(){},e}(),y=function(){function e(e){this.type=\"fromPromise\",this.on=!1,this.p=e}return e.prototype._start=function(e){var t=this;this.on=!0,this.p.then(function(n){t.on&&(e._n(n),e._c())},function(t){e._e(t)}).then(s,function(e){setTimeout(function(){throw e})})},e.prototype._stop=function(){this.on=!1},e}(),_=function(){function e(e){this.type=\"periodic\",this.period=e,this.intervalID=-1,this.i=0}return e.prototype._start=function(e){var t=this;this.intervalID=setInterval(function(){e._n(t.i++)},this.period)},e.prototype._stop=function(){-1!==this.intervalID&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),M=function(){function e(e,t){this.type=\"debug\",this.ins=e,this.out=i,this.s=s,this.l=\"\",\"string\"==typeof t?this.l=t:\"function\"==typeof t&&(this.s=t)}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t!==i){var n=this.s,r=this.l;if(n!==s)try{n(e)}catch(e){t._e(e)}else r?console.log(r+\":\",e):console.log(e);t._n(e)}},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==i&&e._c()},e}(),w=function(){function e(e,t){this.type=\"drop\",this.ins=t,this.out=i,this.max=e,this.dropped=0}return e.prototype._start=function(e){this.out=e,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;t!==i&&this.dropped++>=this.max&&t._n(e)},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==i&&e._c()},e}(),x=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.end()},e}(),k=function(){function e(e,t){this.type=\"endWhen\",this.ins=t,this.out=i,this.o=e,this.oil=l}return e.prototype._start=function(e){this.out=e,this.o._add(this.oil=new x(e,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=i,this.oil=l},e.prototype.end=function(){var e=this.out;e!==i&&e._c()},e.prototype._n=function(e){var t=this.out;t!==i&&t._n(e)},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){this.end()},e}(),D=function(){function e(e,t){this.type=\"filter\",this.ins=t,this.out=i,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t!==i){var n=h(this,e,t);n!==i&&n&&t._n(e)}},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==i&&e._c()},e}(),S=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.out._n(e)},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.inner=i,this.op.less()},e}(),O=function(){function e(e){this.type=\"flatten\",this.ins=e,this.out=i,this.open=!0,this.inner=i,this.il=l}return e.prototype._start=function(e){this.out=e,this.open=!0,this.inner=i,this.il=l,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==i&&this.inner._remove(this.il),this.out=i,this.open=!0,this.inner=i,this.il=l},e.prototype.less=function(){var e=this.out;e!==i&&(this.open||this.inner!==i||e._c())},e.prototype._n=function(e){var t=this.out;if(t!==i){var n=this.inner,r=this.il;n!==i&&r!==l&&n._remove(r),(this.inner=e)._add(this.il=new S(t,this))}},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){this.open=!1,this.less()},e}(),T=function(){function e(e,t,n){var r=this;this.type=\"fold\",this.ins=n,this.out=i,this.f=function(t){return e(r.acc,t)},this.acc=this.seed=t}return e.prototype._start=function(e){this.out=e,this.acc=this.seed,e._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i,this.acc=this.seed},e.prototype._n=function(e){var t=this.out;if(t!==i){var n=h(this,e,t);n!==i&&t._n(this.acc=n)}},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==i&&e._c()},e}(),R=function(){function e(e){this.type=\"last\",this.ins=e,this.out=i,this.has=!1,this.val=i}return e.prototype._start=function(e){this.out=e,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i,this.val=i},e.prototype._n=function(e){this.has=!0,this.val=e},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==i&&(this.has?(e._n(this.val),e._c()):e._e(new Error(\"last() failed because input stream completed\")))},e}(),A=function(){function e(e,t){this.type=\"map\",this.ins=t,this.out=i,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t!==i){var n=h(this,e,t);n!==i&&t._n(n)}},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==i&&e._c()},e}(),C=function(){function e(e){this.type=\"remember\",this.ins=e,this.out=i}return e.prototype._start=function(e){this.out=e,this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=i},e}(),E=function(){function e(e,t){this.type=\"replaceError\",this.ins=t,this.out=i,this.f=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;t!==i&&t._n(e)},e.prototype._e=function(e){var t=this.out;if(t!==i)try{this.ins._remove(this),(this.ins=this.f(e))._add(this)}catch(e){t._e(e)}},e.prototype._c=function(){var e=this.out;e!==i&&e._c()},e}(),N=function(){function e(e,t){this.type=\"startWith\",this.ins=e,this.out=i,this.val=t}return e.prototype._start=function(e){this.out=e,this.out._n(this.val),this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=i},e}(),$=function(){function e(e,t){this.type=\"take\",this.ins=t,this.out=i,this.max=e,this.taken=0}return e.prototype._start=function(e){this.out=e,this.taken=0,this.max<=0?e._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t!==i){var n=++this.taken;n<this.max?t._n(e):n===this.max&&(t._n(e),t._c())}},e.prototype._e=function(e){var t=this.out;t!==i&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==i&&e._c()},e}(),I=function(){function e(e){this._prod=e||i,this._ils=[],this._stopID=i,this._dl=i,this._d=!1,this._target=i,this._err=i}return e.prototype._n=function(e){var t=this._ils,n=t.length;if(this._d&&this._dl._n(e),1==n)t[0]._n(e);else{if(0==n)return;for(var r=c(t),o=0;o<n;o++)r[o]._n(e)}},e.prototype._e=function(e){if(this._err===i){this._err=e;var t=this._ils,n=t.length;if(this._x(),this._d&&this._dl._e(e),1==n)t[0]._e(e);else{if(0==n)return;for(var r=c(t),o=0;o<n;o++)r[o]._e(e)}if(!this._d&&0==n)throw this._err}},e.prototype._c=function(){var e=this._ils,t=e.length;if(this._x(),this._d&&this._dl._c(),1==t)e[0]._c();else{if(0==t)return;for(var n=c(e),r=0;r<t;r++)n[r]._c()}},e.prototype._x=function(){0!==this._ils.length&&(this._prod!==i&&this._prod._stop(),this._err=i,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=i,this._stopID=i},e.prototype._add=function(e){var t=this._target;if(t!==i)return t._add(e);var n=this._ils;if(n.push(e),!(n.length>1))if(this._stopID!==i)clearTimeout(this._stopID),this._stopID=i;else{var r=this._prod;r!==i&&r._start(this)}},e.prototype._remove=function(e){var t=this,n=this._target;if(n!==i)return n._remove(e);var r=this._ils,o=r.indexOf(e);o>-1&&(r.splice(o,1),this._prod!==i&&r.length<=0?(this._err=i,this._stopID=setTimeout(function(){return t._stopNow()})):1===r.length&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(e,t){if(-1!==t.indexOf(e))return!0;if(e.out===this)return!0;if(e.out&&e.out!==i)return this._hasNoSinks(e.out,t.concat(e));if(e._ils){for(var n=0,r=e._ils.length;n<r;n++)if(!this._hasNoSinks(e._ils[n],t.concat(e)))return!1;return!0}return!1},e.prototype.ctor=function(){return this instanceof j?j:e},e.prototype.addListener=function(e){e._n=e.next||s,e._e=e.error||s,e._c=e.complete||s,this._add(e)},e.prototype.removeListener=function(e){this._remove(e)},e.prototype.subscribe=function(e){return this.addListener(e),new p(this,e)},e.prototype[a.default]=function(){return this},e.create=function(t){if(t){if(\"function\"!=typeof t.start||\"function\"!=typeof t.stop)throw new Error(\"producer requires both start and stop functions\");u(t)}return new e(t)},e.createWithMemory=function(e){return e&&u(e),new j(e)},e.never=function(){return new e({_start:s,_stop:s})},e.empty=function(){return new e({_start:function(e){e._c()},_stop:s})},e.throw=function(t){return new e({_start:function(e){e._e(t)},_stop:s})},e.from=function(t){if(\"function\"==typeof t[a.default])return e.fromObservable(t);if(\"function\"==typeof t.then)return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError(\"Type of input to from() must be an Array, Promise, or Observable\")},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.fromArray(t)},e.fromArray=function(t){return new e(new v(t))},e.fromPromise=function(t){return new e(new y(t))},e.fromObservable=function(t){if(t.endWhen)return t;var n=\"function\"==typeof t[a.default]?t[a.default]():t;return new e(new m(n))},e.periodic=function(t){return new e(new _(t))},e.prototype._map=function(e){return new(this.ctor())(new A(e,this))},e.prototype.map=function(e){return this._map(e)},e.prototype.mapTo=function(e){var t=this.map(function(){return e});return t._prod.type=\"mapTo\",t},e.prototype.filter=function(t){var n,r,o=this._prod;return new e(o instanceof D?new D((n=o.f,r=t,function(e){return n(e)&&r(e)}),o.ins):new D(t,this))},e.prototype.take=function(e){return new(this.ctor())(new $(e,this))},e.prototype.drop=function(t){return new e(new w(t,this))},e.prototype.last=function(){return new e(new R(this))},e.prototype.startWith=function(e){return new j(new N(this,e))},e.prototype.endWhen=function(e){return new(this.ctor())(new k(e,this))},e.prototype.fold=function(e,t){return new j(new T(e,t,this))},e.prototype.replaceError=function(e){return new(this.ctor())(new E(e,this))},e.prototype.flatten=function(){return new e(new O(this))},e.prototype.compose=function(e){return e(this)},e.prototype.remember=function(){return new j(new C(this))},e.prototype.debug=function(e){return new(this.ctor())(new M(this,e))},e.prototype.imitate=function(e){if(e instanceof j)throw new Error(\"A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq\");this._target=e;for(var t=this._ils,n=t.length,r=0;r<n;r++)e._add(t[r]);this._ils=[]},e.prototype.shamefullySendNext=function(e){this._n(e)},e.prototype.shamefullySendError=function(e){this._e(e)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(e){e?(this._d=!0,e._n=e.next||s,e._e=e.error||s,e._c=e.complete||s,this._dl=e):(this._d=!1,this._dl=i)},e.merge=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(new f(t))},e.combine=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(new b(t))},e}();t.Stream=I;var j=function(e){function t(t){var n=e.call(this,t)||this;return n._has=!1,n}return o(t,e),t.prototype._n=function(t){this._v=t,this._has=!0,e.prototype._n.call(this,t)},t.prototype._add=function(e){var t=this._target;if(t!==i)return t._add(e);var n=this._ils;if(n.push(e),n.length>1)this._has&&e._n(this._v);else if(this._stopID!==i)this._has&&e._n(this._v),clearTimeout(this._stopID),this._stopID=i;else if(this._has)e._n(this._v);else{var r=this._prod;r!==i&&r._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(e){return this._map(e)},t.prototype.mapTo=function(t){return e.prototype.mapTo.call(this,t)},t.prototype.take=function(t){return e.prototype.take.call(this,t)},t.prototype.endWhen=function(t){return e.prototype.endWhen.call(this,t)},t.prototype.replaceError=function(t){return e.prototype.replaceError.call(this,t)},t.prototype.remember=function(){return this},t.prototype.debug=function(t){return e.prototype.debug.call(this,t)},t}(I);t.MemoryStream=j;var B=I;t.default=B},function(e,t,n){\"use strict\";(function(e){function n(){var t;return(t=\"undefined\"!=typeof window?window:void 0!==e?e:this).Cyclejs=t.Cyclejs||{},(t=t.Cyclejs).adaptStream=t.adaptStream||function(e){return e},t}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setAdapt=function(e){n().adaptStream=e},t.adapt=function(e){return n().adaptStream(e)}}).call(this,n(5))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(4),o=n(15);function a(e,t,n){var a,i,s,c={};if(void 0!==n?(c=t,o.array(n)?a=n:o.primitive(n)?i=n:n&&n.sel&&(a=[n])):void 0!==t&&(o.array(t)?a=t:o.primitive(t)?i=t:t&&t.sel?a=[t]:c=t),void 0!==a)for(s=0;s<a.length;++s)o.primitive(a[s])&&(a[s]=r.vnode(void 0,void 0,void 0,a[s],void 0));return\"s\"!==e[0]||\"v\"!==e[1]||\"g\"!==e[2]||3!==e.length&&\".\"!==e[3]&&\"#\"!==e[3]||function e(t,n,r){if(t.ns=\"http://www.w3.org/2000/svg\",\"foreignObject\"!==r&&void 0!==n)for(var o=0;o<n.length;++o){var a=n[o].data;void 0!==a&&e(a,n[o].children,n[o].sel)}}(c,a,e),r.vnode(e,c,a,i,void 0)}t.h=a,t.default=a},function(e,t,n){\"use strict\";(function(e){var n,r=(\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==e?e:Function(\"return this\")()).Symbol;n=\"function\"==typeof r?r(\"parent\"):\"@@snabbdom-selector-parent\",t.a=n}).call(this,n(5))},function(e,t,n){\"use strict\";function r(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.vnode=r,t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\"use strict\";function r(e,t){var n,r,o=t.elm,a=e.data.class,i=t.data.class;if((a||i)&&a!==i){for(r in i=i||{},a=a||{})i[r]||o.classList.remove(r);for(r in i)(n=i[r])!==a[r]&&o.classList[n?\"add\":\"remove\"](r)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.classModule={create:r,update:r},t.default=t.classModule},function(e,t,n){\"use strict\";function r(e,t){var n,r,o=t.elm,a=e.data.props,i=t.data.props;if((a||i)&&a!==i){for(n in i=i||{},a=a||{})i[n]||delete o[n];for(n in i)r=i[n],a[n]===r||\"value\"===n&&o[n]===r||(o[n]=r)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.propsModule={create:r,update:r},t.default=t.propsModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"http://www.w3.org/1999/xlink\",o=\"http://www.w3.org/XML/1998/namespace\",a=58,i=120;function s(e,t){var n,s=t.elm,c=e.data.attrs,h=t.data.attrs;if((c||h)&&c!==h){for(n in c=c||{},h=h||{}){var l=h[n];c[n]!==l&&(!0===l?s.setAttribute(n,\"\"):!1===l?s.removeAttribute(n):n.charCodeAt(0)!==i?s.setAttribute(n,l):n.charCodeAt(3)===a?s.setAttributeNS(o,n,l):n.charCodeAt(5)===a?s.setAttributeNS(r,n,l):s.setAttribute(n,l))}for(n in c)n in h||s.removeAttribute(n)}}t.attributesModule={create:s,update:s},t.default=t.attributesModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"undefined\"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,o=function(e){r(function(){r(e)})},a=!1;function i(e,t,n){o(function(){e[t]=n})}function s(e,t){var n,r,o=t.elm,a=e.data.style,s=t.data.style;if((a||s)&&a!==s){s=s||{};var c=\"delayed\"in(a=a||{});for(r in a)s[r]||(\"-\"===r[0]&&\"-\"===r[1]?o.style.removeProperty(r):o.style[r]=\"\");for(r in s)if(n=s[r],\"delayed\"===r&&s.delayed)for(var h in s.delayed)n=s.delayed[h],c&&n===a.delayed[h]||i(o.style,h,n);else\"remove\"!==r&&n!==a[r]&&(\"-\"===r[0]&&\"-\"===r[1]?o.style.setProperty(r,n):o.style[r]=n)}}t.styleModule={pre:function(){a=!1},create:s,update:s,destroy:function(e){var t,n,r=e.elm,o=e.data.style;if(o&&(t=o.destroy))for(n in t)r.style[n]=t[n]},remove:function(e,t){var n=e.data.style;if(n&&n.remove){a||(getComputedStyle(document.body).transform,a=!0);var r,o=e.elm,i=0,s=n.remove,c=0,h=[];for(r in s)h.push(r),o.style[r]=s[r];for(var l=getComputedStyle(o)[\"transition-property\"].split(\", \");i<l.length;++i)-1!==h.indexOf(l[i])&&c++;o.addEventListener(\"transitionend\",function(e){e.target===o&&--c,0===c&&t()})}else t()}},t.default=t.styleModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=/[A-Z]/g;function o(e,t){var n,o=t.elm,a=e.data.dataset,i=t.data.dataset;if((a||i)&&a!==i){a=a||{},i=i||{};var s=o.dataset;for(n in a)i[n]||(s?n in s&&delete s[n]:o.removeAttribute(\"data-\"+n.replace(r,\"-$&\").toLowerCase()));for(n in i)a[n]!==i[n]&&(s?s[n]=i[n]:o.setAttribute(\"data-\"+n.replace(r,\"-$&\").toLowerCase(),i[n]))}}t.datasetModule={create:o,update:o},t.default=t.datasetModule},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(4),o=n(18);function a(e,t){var n,i=void 0!==t?t:o.default;if(i.isElement(e)){var s,c=e.id?\"#\"+e.id:\"\",h=e.getAttribute(\"class\"),l=h?\".\"+h.split(\" \").join(\".\"):\"\",u=i.tagName(e).toLowerCase()+c+l,p={},d=[],m=void 0,f=void 0,g=e.attributes,b=e.childNodes;for(m=0,f=g.length;m<f;m++)\"id\"!==(s=g[m].nodeName)&&\"class\"!==s&&(p[s]=g[m].nodeValue);for(m=0,f=b.length;m<f;m++)d.push(a(b[m],t));return r.default(u,{attrs:p},d,void 0,e)}return i.isText(e)?(n=i.getTextContent(e),r.default(void 0,void 0,void 0,n,e)):i.isComment(e)?(n=i.getTextContent(e),r.default(\"!\",{},[],n,e)):r.default(\"\",{},[],void 0,e)}t.toVNode=a,t.default=a},function(e,t,n){\"use strict\";function r(e){var t,n=e.Symbol;return\"function\"==typeof n?n.observable?t=n.observable:(t=n(\"observable\"),n.observable=t):t=\"@@observable\",t}n.d(t,\"a\",function(){return r})},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),o=function(){function e(e){this.streams=e,this.type=\"concat\",this.out=null,this.i=0}return e.prototype._start=function(e){this.out=e,this.streams[this.i]._add(this)},e.prototype._stop=function(){var e=this.streams;this.i<e.length&&e[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(e){var t=this.out;t&&t._n(e)},e.prototype._e=function(e){var t=this.out;t&&t._e(e)},e.prototype._c=function(){var e=this.out;if(e){var t=this.streams;t[this.i]._remove(this),++this.i<t.length?t[this.i]._add(this):e._c()}},e}();t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new r.Stream(new o(e))}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),o={},a=function(){function e(e,t){this.i=e,this.p=t,t.ils[e]=this}return e.prototype._n=function(e){var t=this.p;t.out!==o&&t.up(e,this.i)},e.prototype._e=function(e){this.p._e(e)},e.prototype._c=function(){this.p.down(this.i,this)},e}();t.SampleCombineListener=a;var i,s=function(){function e(e,t){this.type=\"sampleCombine\",this.ins=e,this.others=t,this.out=o,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(e){this.out=e;for(var t=this.others,n=this.Nn=t.length,r=this.vals=new Array(n),i=0;i<n;i++)r[i]=o,t[i]._add(new a(i,this));this.ins._add(this)},e.prototype._stop=function(){var e=this.others,t=e.length,n=this.ils;this.ins._remove(this);for(var r=0;r<t;r++)e[r]._remove(n[r]);this.out=o,this.vals=[],this.ils=[]},e.prototype._n=function(e){var t=this.out;t!==o&&(this.Nn>0||t._n([e].concat(this.vals)))},e.prototype._e=function(e){var t=this.out;t!==o&&t._e(e)},e.prototype._c=function(){var e=this.out;e!==o&&e._c()},e.prototype.up=function(e,t){var n=this.vals[t];this.Nn>0&&n===o&&this.Nn--,this.vals[t]=e},e.prototype.down=function(e,t){this.others[e]._remove(t)},e}();t.SampleCombineOperator=s,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return new r.Stream(new s(t,e))}},t.default=i},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.array=Array.isArray,t.primitive=function(e){return\"string\"==typeof e||\"number\"==typeof e}},function(e,t,n){\"use strict\";n.r(t),function(e,r){var o,a=n(12);o=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==e?e:r;var i=Object(a.a)(o);t.default=i}.call(this,n(5),n(17)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,\"exports\",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.htmlDomApi={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}},t.default=t.htmlDomApi},function(e,t,n){\"use strict\";n.r(t);var r=n(2);var o=n(1),a=n(0),i=n.n(a);function s(e,t,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1);var i=null;return a.Stream.create({start:function(a){i=r?function(e){c(e,r),a.next(e)}:function(e){a.next(e)},e.addEventListener(t,i,{capture:n,passive:o})},stop:function(){e.removeEventListener(t,i,n),i=null}})}function c(e,t){if(t)if(\"boolean\"==typeof t)e.preventDefault();else if(\"function\"==typeof t)t(e)&&e.preventDefault();else{if(\"object\"!=typeof t)throw new Error(\"preventDefault has to be either a boolean, predicate function or object\");(function e(t,n){for(var r=Object.keys(t),o=r.length,a=0;a<o;a++){var i=r[a];if(\"object\"==typeof t[i]&&\"object\"==typeof n[i]){if(!e(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1}return!0})(t,e)&&e.preventDefault()}}var l=function(){function e(e){this._name=e}return e.prototype.select=function(e){return this},e.prototype.elements=function(){var e=Object(o.adapt)(i.a.of([document]));return e._isCycleSource=this._name,e},e.prototype.element=function(){var e=Object(o.adapt)(i.a.of(document));return e._isCycleSource=this._name,e},e.prototype.events=function(e,t,n){var r;void 0===t&&(t={}),r=s(document,e,t.useCapture,t.preventDefault);var a=Object(o.adapt)(r);return a._isCycleSource=this._name,a},e}(),u=function(){function e(e){this._name=e}return e.prototype.select=function(e){return this},e.prototype.elements=function(){var e=Object(o.adapt)(i.a.of([document.body]));return e._isCycleSource=this._name,e},e.prototype.element=function(){var e=Object(o.adapt)(i.a.of(document.body));return e._isCycleSource=this._name,e},e.prototype.events=function(e,t,n){var r;void 0===t&&(t={}),r=s(document.body,e,t.useCapture,t.preventDefault);var a=Object(o.adapt)(r);return a._isCycleSource=this._name,a},e}();function p(e){if(\"string\"!=typeof e&&(t=e,!(\"object\"==typeof HTMLElement?t instanceof HTMLElement||t instanceof DocumentFragment:t&&\"object\"==typeof t&&null!==t&&(1===t.nodeType||11===t.nodeType)&&\"string\"==typeof t.nodeName)))throw new Error(\"Given container is not a DOM element neither a selector string.\");var t}function m(e){for(var t=\"\",n=e.length-1;n>=0&&\"selector\"===e[n].type;n--)t=e[n].scope+\" \"+t;return t.trim()}function f(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].type!==t[n].type||e[n].scope!==t[n].scope)return!1;return!0}var g=function(){function e(e,t){this.namespace=e,this.isolateModule=t,this._namespace=e.filter(function(e){return\"selector\"!==e.type})}return e.prototype.isDirectlyInScope=function(e){var t=this.isolateModule.getNamespace(e);if(!t)return!1;if(this._namespace.length>t.length||!f(this._namespace,t.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<t.length;n++)if(\"total\"===t[n].type)return!1;return!0},e}();var b=function(){function e(e,t){this.namespace=e,this.isolateModule=t}return e.prototype.call=function(){var e,t=this.namespace,n=m(t),r=new g(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(e){return\"selector\"!==e.type}));return void 0===o?[]:\"\"===n?[o]:(e=o.querySelectorAll(n),Array.prototype.slice.call(e)).filter(r.isDirectlyInScope,r).concat(o.matches(n)?[o]:[])},e}(),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function y(e){return{type:(t=e,t.length>1&&(\".\"===t[0]||\"#\"===t[0])?\"sibling\":\"total\"),scope:e};var t}var _=function(){function e(t,n,r,o,a,i){var s;void 0===r&&(r=[]),this._rootElement$=t,this._sanitation$=n,this._namespace=r,this._isolateModule=o,this._eventDelegator=a,this._name=i,this.isolateSource=function(t,n){return new e(t._rootElement$,t._sanitation$,t._namespace.concat(y(n)),t._isolateModule,t._eventDelegator,t._name)},this.isolateSink=(s=this._namespace,function(e,t){return\":root\"===t?e:e.map(function(e){if(!e)return e;var n=y(t),r=v({},e,{data:v({},e.data,{isolate:e.data&&Array.isArray(e.data.isolate)?e.data.isolate:s.concat([n])})});return v({},r,{key:void 0!==r.key?r.key:JSON.stringify(r.data.isolate)})})})}return e.prototype._elements=function(){if(0===this._namespace.length)return this._rootElement$.map(function(e){return[e]});var e=new b(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return e.call()})},e.prototype.elements=function(){var e=Object(o.adapt)(this._elements().remember());return e._isCycleSource=this._name,e},e.prototype.element=function(){var e=Object(o.adapt)(this._elements().filter(function(e){return e.length>0}).map(function(e){return e[0]}).remember());return e._isCycleSource=this._name,e},Object.defineProperty(e.prototype,\"namespace\",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(\"string\"!=typeof t)throw new Error(\"DOM driver's select() expects the argument to be a string as a CSS selector\");if(\"document\"===t)return new l(this._name);if(\"body\"===t)return new u(this._name);var n=\":root\"===t?[]:this._namespace.concat({type:\"selector\",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,n,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(e,t,n){if(void 0===t&&(t={}),\"string\"!=typeof e)throw new Error(\"DOM driver's events() expects argument to be a string representing the event type to listen for.\");var r=this._eventDelegator.addEventListener(e,this._namespace,t,n),a=Object(o.adapt)(r);return a._isCycleSource=this._name,a},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}();function M(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}var w=M,k=Array.isArray;function D(e){return\"string\"==typeof e||\"number\"==typeof e}var S={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}};function O(e){return void 0===e}function T(e){return void 0!==e}var R=w(\"\",{},[],void 0,void 0);function A(e,t){return e.key===t.key&&e.sel===t.sel}function C(e,t,n){var r,o,a,i={};for(r=t;r<=n;++r)null!=(a=e[r])&&void 0!==(o=a.key)&&(i[o]=r);return i}var E=[\"create\",\"update\",\"remove\",\"destroy\",\"pre\",\"post\"];function N(e,t){var n,r,o={},a=void 0!==t?t:S;for(n=0;n<E.length;++n)for(o[E[n]]=[],r=0;r<e.length;++r){var i=e[r][E[n]];void 0!==i&&o[E[n]].push(i)}function s(e,t){return function(){if(0==--t){var n=a.parentNode(e);a.removeChild(n,e)}}}function c(e,t){var n,r=e.data;void 0!==r&&T(n=r.hook)&&T(n=n.init)&&(n(e),r=e.data);var i=e.children,s=e.sel;if(\"!\"===s)O(e.text)&&(e.text=\"\"),e.elm=a.createComment(e.text);else if(void 0!==s){var h=s.indexOf(\"#\"),l=s.indexOf(\".\",h),u=h>0?h:s.length,p=l>0?l:s.length,d=-1!==h||-1!==l?s.slice(0,Math.min(u,p)):s,m=e.elm=T(r)&&T(n=r.ns)?a.createElementNS(n,d):a.createElement(d);for(u<p&&m.setAttribute(\"id\",s.slice(u+1,p)),l>0&&m.setAttribute(\"class\",s.slice(p+1).replace(/\\./g,\" \")),n=0;n<o.create.length;++n)o.create[n](R,e);if(k(i))for(n=0;n<i.length;++n){var f=i[n];null!=f&&a.appendChild(m,c(f,t))}else D(e.text)&&a.appendChild(m,a.createTextNode(e.text));T(n=e.data.hook)&&(n.create&&n.create(R,e),n.insert&&t.push(e))}else e.elm=a.createTextNode(e.text);return e.elm}function h(e,t,n,r,o,i){for(;r<=o;++r){var s=n[r];null!=s&&a.insertBefore(e,c(s,i),t)}}function l(e){var t,n,r=e.data;if(void 0!==r){for(T(t=r.hook)&&T(t=t.destroy)&&t(e),t=0;t<o.destroy.length;++t)o.destroy[t](e);if(void 0!==e.children)for(n=0;n<e.children.length;++n)null!=(t=e.children[n])&&\"string\"!=typeof t&&l(t)}}function u(e,t,n,r){for(;n<=r;++n){var i=void 0,c=void 0,h=void 0,u=t[n];if(null!=u)if(T(u.sel)){for(l(u),c=o.remove.length+1,h=s(u.elm,c),i=0;i<o.remove.length;++i)o.remove[i](u,h);T(i=u.data)&&T(i=i.hook)&&T(i=i.remove)?i(u,h):h()}else a.removeChild(e,u.elm)}}function p(e,t,n){var r,i;T(r=t.data)&&T(i=r.hook)&&T(r=i.prepatch)&&r(e,t);var s=t.elm=e.elm,l=e.children,d=t.children;if(e!==t){if(void 0!==t.data){for(r=0;r<o.update.length;++r)o.update[r](e,t);T(r=t.data.hook)&&T(r=r.update)&&r(e,t)}O(t.text)?T(l)&&T(d)?l!==d&&function(e,t,n,r){for(var o,i,s,l=0,d=0,m=t.length-1,f=t[0],g=t[m],b=n.length-1,v=n[0],y=n[b];l<=m&&d<=b;)null==f?f=t[++l]:null==g?g=t[--m]:null==v?v=n[++d]:null==y?y=n[--b]:A(f,v)?(p(f,v,r),f=t[++l],v=n[++d]):A(g,y)?(p(g,y,r),g=t[--m],y=n[--b]):A(f,y)?(p(f,y,r),a.insertBefore(e,f.elm,a.nextSibling(g.elm)),f=t[++l],y=n[--b]):A(g,v)?(p(g,v,r),a.insertBefore(e,g.elm,f.elm),g=t[--m],v=n[++d]):(void 0===o&&(o=C(t,l,m)),O(i=o[v.key])?(a.insertBefore(e,c(v,r),f.elm),v=n[++d]):((s=t[i]).sel!==v.sel?a.insertBefore(e,c(v,r),f.elm):(p(s,v,r),t[i]=void 0,a.insertBefore(e,s.elm,f.elm)),v=n[++d]));(l<=m||d<=b)&&(l>m?h(e,null==n[b+1]?null:n[b+1].elm,n,d,b,r):u(e,t,l,m))}(s,l,d,n):T(d)?(T(e.text)&&a.setTextContent(s,\"\"),h(s,null,d,0,d.length-1,n)):T(l)?u(s,l,0,l.length-1):T(e.text)&&a.setTextContent(s,\"\"):e.text!==t.text&&(T(l)&&u(s,l,0,l.length-1),a.setTextContent(s,t.text)),T(i)&&T(r=i.postpatch)&&r(e,t)}}return function(e,t){var n,r,i,s=[];for(n=0;n<o.pre.length;++n)o.pre[n]();for(function(e){return void 0!==e.sel}(e)||(e=function(e){var t=e.id?\"#\"+e.id:\"\",n=e.className?\".\"+e.className.split(\" \").join(\".\"):\"\";return w(a.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}(e)),A(e,t)?p(e,t,s):(r=e.elm,i=a.parentNode(r),c(t,s),null!==i&&(a.insertBefore(i,t.elm,a.nextSibling(r)),u(i,[e],0,0))),n=0;n<s.length;++n)s[n].data.hook.insert(s[n]);for(n=0;n<o.post.length;++n)o.post[n]();return t}}var $=n(13),I=n.n($),j=n(14),B=n.n(j),L=n(11),Q=n(4);var z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},F=\"[\\\\w-]+\",P=\"[ \\t]*\",Z=\"[^\\\\]]+\",W=\"(?:=|\\\\$=|\\\\^=|\\\\*=|~=|\\\\|=)\",G=\"(?:(?:[ \\t]+)|\"+(\"(?:\"+P+\"(>)\"+P+\")\")+\"|\"+(\"(?:\"+P+\"(\\\\+)\"+P+\")\")+\"|\"+(\"(?:\"+P+\"(~)\"+P+\")\")+\")\",q=\"(:?\"+F+\")?\",H=\"(?:\\\\.\"+F+\")\"+\"|\"+(\"(?:#\"+F+\")\")+\"|\"+(\"(?:\\\\[\"+P+F+P+\"(?:\"+W+P+Z+P+\")?\\\\])\")+'|:(?:first-child|last-child|nth-child\\\\((?:even|odd|\\\\d*(?:-?n(?:\\\\+\\\\d+)?)?)\\\\)|empty|root|contains\\\\(\"[^\"]*\"\\\\))|'+G,U=new RegExp(\"^\"+G+\"$\");function V(e){var t=e.trim(),n=new RegExp(q,\"y\"),r=n.exec(t)[0],o=new RegExp(H,\"y\");o.lastIndex=n.lastIndex;for(var a=[],i=void 0,s=void 0,c=-1;o.lastIndex<t.length;){var h=o.exec(t);if(!h&&void 0===s)throw new Error(\"Parse error, invalid selector\");if(h&&U.test(h[0])){s=U.exec(h[0])[0],c=o.lastIndex}else{if(void 0!==s){i=[K(s),V(t.substring(c))];break}a.push(h[0])}}var l=a.filter(function(e){return e.startsWith(\".\")}).map(function(e){return e.substring(1)}),u=a.filter(function(e){return e.startsWith(\"#\")}).map(function(e){return e.substring(1)});if(u.length>1)throw new Error(\"Invalid selector, only one id is allowed\");var p=new RegExp(\"(\"+F+\")\"+P+\"(\"+W+\")?\"+P+\"(\"+Z+\")?\"),d=a.filter(function(e){return e.startsWith(\"[\")}).map(function(e){return p.exec(e).slice(1,4)}).map(function(e){var t,n=e[0],r=e[1],o=e[2];return(t={})[n]=[Y(r),o?J(o):o],t}).reduce(function(e,t){return z({},e,t)},{}),m=a.filter(function(e){return e.startsWith(\":\")}).map(function(e){return function(e){if(\"first-child\"===e||\"last-child\"===e||\"root\"===e||\"empty\"===e)return[e,void 0];if(e.startsWith(\"contains\")){return[\"contains\",e.slice(10,-2)]}var t=e.slice(10,-1);\"even\"===t&&(t=\"2n\");\"odd\"===t&&(t=\"2n+1\");return[\"nth-child\",t]}(e.substring(1))});return{id:u[0]||\"\",tag:r,classList:l,attributes:d,nextSelector:i,pseudos:m}}function J(e){if(e.startsWith('\"'))return e.slice(1,-1);if(\"true\"===e)return!0;if(\"false\"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}function Y(e){switch(e){case\"=\":return\"exact\";case\"^=\":return\"startsWith\";case\"$=\":return\"endsWith\";case\"*=\":return\"contains\";case\"~=\":return\"whitespace\";case\"|=\":return\"dash\";default:return\"has\"}}function K(e){switch(e.trim()){case\">\":return\"child\";case\"+\":return\"nextSibling\";case\"~\":return\"sibling\";default:return\"subtree\"}}function X(e){return function(t,n){var r=\"object\"==typeof t?t:V(t),o=r.tag,a=r.id,i=r.classList,s=r.attributes,c=r.nextSelector,h=r.pseudos;if(void 0!==c)throw new Error(\"matches can only process selectors that target a single element\");if(!n)return!1;if(o&&o.toLowerCase()!==e.tag(n).toLowerCase())return!1;if(a&&a!==e.id(n))return!1;for(var l=e.className(n).split(\" \"),u=0;u<i.length;u++)if(-1===l.indexOf(i[u]))return!1;for(var p in s){var d=e.attr(n,p),m=s[p][0],f=s[p][1];if(void 0===d)return!1;if(\"has\"===m)return!0;if(\"exact\"===m&&d!==f)return!1;if(\"exact\"!==m){if(\"string\"!=typeof f)throw new Error(\"All non-string values have to be an exact match\");if(\"startsWith\"===m&&!d.startsWith(f))return!1;if(\"endsWith\"===m&&!d.endsWith(f))return!1;if(\"contains\"===m&&-1===d.indexOf(f))return!1;if(\"whitespace\"===m&&-1===d.split(\" \").indexOf(f))return!1;if(\"dash\"===m&&-1===d.split(\"-\").indexOf(f))return!1}}for(u=0;u<h.length;u++){var g=h[u],b=(m=g[0],g[1]);if(\"contains\"===m&&b!==e.contents(n))return!1;if(\"empty\"===m&&(e.contents(n)||0!==e.children(n).length))return!1;if(\"root\"===m&&void 0!==e.parent(n))return!1;if(-1!==m.indexOf(\"child\")){if(!e.parent(n))return!1;var v=e.children(e.parent(n));if(\"first-child\"===m&&0!==v.indexOf(n))return!1;if(\"last-child\"===m&&v.indexOf(n)!==v.length-1)return!1;if(\"nth-child\"===m){var y=/([\\+-]?)(\\d*)(n?)(\\+\\d+)?/.exec(b).slice(1),_=v.indexOf(n);y[0]||(y[0]=\"+\");var M=y[1]?parseInt(y[0]+y[1]):void 0,w=parseInt(y[3]||\"0\");if(M&&\"n\"===y[2]&&_%M!==w)return!1;if(!M&&y[2]&&(\"+\"===y[0]&&_-w<0||\"-\"===y[0]&&_-w>=0))return!1;if(!y[2]&&M&&_!==M-1)return!1}}}return!0}}function ee(e){if(!e.sel)return{tagName:\"\",id:\"\",className:\"\"};var t=e.sel,n=t.indexOf(\"#\"),r=t.indexOf(\".\",n),o=n>0?n:t.length,a=r>0?r:t.length;return{tagName:-1!==n||-1!==r?t.slice(0,Math.min(o,a)):t,id:o<a?t.slice(o+1,a):void 0,className:r>0?t.slice(a+1).replace(/\\./g,\" \"):void 0}}function te(e){var t=ee(e).className,n=void 0===t?\"\":t;if(!e.data)return n;var r=e.data,o=r.class,a=r.props;o&&(n+=\" \"+Object.keys(o).filter(function(e){return o[e]}).join(\" \"));return a&&a.className&&(n+=\" \"+a.className),n&&n.trim()}var ne=n(3),re={tag:function(e){return ee(e).tagName},className:function(e){return te(e)},id:function(e){return ee(e).id||\"\"},children:function(e){return e.children||[]},parent:function(e){return e.data[ne.a]||e},contents:function(e){return e.text||\"\"},attr:function(e,t){if(e.data){var n=e.data,r=n.attrs,o=void 0===r?{}:r,a=n.props,i=void 0===a?{}:a,s=n.dataset,c=void 0===s?{}:s;if(o[t])return o[t];if(i[t])return i[t];if(0===t.indexOf(\"data-\")&&c[t.slice(5)])return c[t.slice(5)]}}},oe=X(re);var ae,ie;ae=re,ie=function(e,t){var n=t.data,r=oe.bind(null,e);if(n&&n.fn){var o=void 0;return!!r(o=Array.isArray(n.args)?n.fn.apply(null,n.args):n.args?n.fn.call(null,n.args):n.fn())&&o}return r(t)}||X(ae);var se=function(){function e(e){this.rootElement=e}return e.prototype.call=function(e){if(11===this.rootElement.nodeType)return this.wrapDocFrag(null===e?[]:[e]);if(null===e)return this.wrap([]);var t=ee(e),n=t.tagName,r=t.id,o=te(e),a=((e.data||{}).props||{}).id,i=void 0===a?r:a;return\"string\"==typeof i&&i.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&o.toUpperCase()===this.rootElement.className.toUpperCase()?e:this.wrap([e])},e.prototype.wrapDocFrag=function(e){return Object(Q.vnode)(\"\",{isolate:[]},e,void 0,this.rootElement)},e.prototype.wrap=function(e){var t=this.rootElement,n=t.tagName,o=t.id,a=t.className,i=o?\"#\"+o:\"\",s=a?\".\"+a.split(\" \").join(\".\"):\"\",c=Object(r.h)(\"\"+n.toLowerCase()+i+s,{},e);return c.data=c.data||{},c.data.isolate=c.data.isolate||[],c},e}(),ce=n(6),he=n.n(ce),le=n(7),ue=n.n(le),pe=n(8),de=n.n(pe),me=n(9),fe=n.n(me),ge=n(10),be=n.n(ge),ve=[fe.a,he.a,ue.a,de.a,be.a],ye=function(){function e(e){this.mapper=e,this.tree=[void 0,{}]}return e.prototype.set=function(e,t,n){for(var r=this.tree,o=void 0!==n?n:e.length,a=0;a<o;a++){var i=this.mapper(e[a]),s=r[1][i];s||(s=[void 0,{}],r[1][i]=s),r=s}r[0]=t},e.prototype.getDefault=function(e,t,n){return this.get(e,t,n)},e.prototype.get=function(e,t,n){for(var r=this.tree,o=void 0!==n?n:e.length,a=0;a<o;a++){var i=this.mapper(e[a]),s=r[1][i];if(!s){if(!t)return;s=[void 0,{}],r[1][i]=s}r=s}return t&&!r[0]&&(r[0]=t()),r[0]},e.prototype.delete=function(e){for(var t=this.tree,n=0;n<e.length-1;n++){var r=t[1][this.mapper(e[n])];if(!r)return;t=r}delete t[1][this.mapper(e[e.length-1])]},e}(),_e=function(){function e(){this.namespaceTree=new ye(function(e){return e.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(e){this.eventDelegator=e},e.prototype.insertElement=function(e,t){this.namespaceByElement.set(t,e),this.namespaceTree.set(e,t)},e.prototype.removeElement=function(e){this.namespaceByElement.delete(e);var t=this.getNamespace(e);t&&this.namespaceTree.delete(t)},e.prototype.getElement=function(e,t){return this.namespaceTree.get(e,void 0,t)},e.prototype.getRootElement=function(e){if(this.namespaceByElement.has(e))return e;for(var t=e;!this.namespaceByElement.has(t);){if(!(t=t.parentNode))return;if(\"HTML\"===t.tagName)throw new Error(\"No root element found, this should not happen at all\")}return t},e.prototype.getNamespace=function(e){var t=this.getRootElement(e);if(t)return this.namespaceByElement.get(t)},e.prototype.createModule=function(){var e=this;return{create:function(t,n){var r=n.elm,o=n.data,a=(void 0===o?{}:o).isolate;Array.isArray(a)&&e.insertElement(a,r)},update:function(t,n){var r=t.elm,o=t.data,a=void 0===o?{}:o,i=n.elm,s=n.data,c=void 0===s?{}:s,h=a.isolate,l=c.isolate;f(h,l)||Array.isArray(h)&&e.removeElement(r),Array.isArray(l)&&e.insertElement(l,i)},destroy:function(t){e.vnodesBeingRemoved.push(t)},remove:function(t,n){e.vnodesBeingRemoved.push(t),n()},post:function(){for(var t=e.vnodesBeingRemoved,n=t.length-1;n>=0;n--){var r=t[n],o=void 0!==r.data?r.data.isolation:void 0;void 0!==o&&e.removeElement(o),e.eventDelegator.removeElement(r.elm,o)}e.vnodesBeingRemoved=[]}}},e}(),Me=function(){function e(){this.toDelete=[],this.toDeleteSize=0,this._set=new Set}return e.prototype.add=function(e){this._set.add(e)},e.prototype.forEach=function(e){this._set.forEach(e),this.flush()},e.prototype.delete=function(e){this.toDelete.length===this.toDeleteSize?this.toDelete.push(e):this.toDelete[this.toDeleteSize]=e,this.toDeleteSize++},e.prototype.flush=function(){for(var e=0;e<this.toDelete.length;e++)e<this.toDeleteSize&&this._set.delete(this.toDelete[e]),this.toDelete[e]=void 0;this.toDeleteSize=0},e}(),we=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(e,t){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<t)return this.arr.splice(n,0,e),void this.prios.splice(n,0,t);this.arr.push(e),this.prios.push(t)},e.prototype.forEach=function(e){for(var t=0;t<this.arr.length;t++)e(this.arr[t],t,this.arr)},e.prototype.delete=function(e){for(var t=0;t<this.arr.length;t++)if(this.arr[t]===e)return this.arr.splice(t,1),void this.prios.splice(t,1)},e}(),xe=function(){return(xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ke=[\"blur\",\"canplay\",\"canplaythrough\",\"durationchange\",\"emptied\",\"ended\",\"focus\",\"load\",\"loadeddata\",\"loadedmetadata\",\"mouseenter\",\"mouseleave\",\"pause\",\"play\",\"playing\",\"ratechange\",\"reset\",\"scroll\",\"seeked\",\"seeking\",\"stalled\",\"submit\",\"suspend\",\"timeupdate\",\"unload\",\"volumechange\",\"waiting\"],De=function(){function e(e,t){var n=this;this.rootElement$=e,this.isolateModule=t,this.virtualListeners=new ye(function(e){return e.scope}),this.nonBubblingListenersToAdd=new Me,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,e.addListener({next:function(e){n.origin!==e&&(n.origin=e,n.resetEventListeners(),n.domListenersToAdd.forEach(function(e,t){return n.setupDOMListener(t,e)}),n.domListenersToAdd.clear()),n.resetNonBubblingListeners(),n.nonBubblingListenersToAdd.forEach(function(e){n.setupNonBubblingListener(e)})}})}return e.prototype.addEventListener=function(e,t,n,r){var o=i.a.never(),a=new g(t,this.isolateModule),s=this.insertListener(o,a,e,n);if(void 0===r?-1===ke.indexOf(e):r)this.domListeners.has(e)||this.setupDOMListener(e,!!n.passive);else{var c=new b(t,this.isolateModule);this.setupNonBubblingListener([e,c,s])}return o},e.prototype.removeElement=function(e,t){void 0!==t&&this.virtualListeners.delete(t);var n=[];this.nonBubblingListeners.forEach(function(t,r){t.has(e)&&n.push([r,e])});for(var r=0;r<n.length;r++){var o=this.nonBubblingListeners.get(n[r][0]);o&&(o.delete(n[r][1]),0===o.size?this.nonBubblingListeners.delete(n[r][0]):this.nonBubblingListeners.set(n[r][0],o))}},e.prototype.insertListener=function(e,t,n,r){var o=[],a=t._namespace,i=a.length;do{o.push(this.getVirtualListeners(n,a,!0,i)),i--}while(i>=0&&\"total\"!==a[i].type);for(var s=xe({},r,{scopeChecker:t,subject:e,bubbles:!!r.bubbles,useCapture:!!r.useCapture,passive:!!r.passive}),c=0;c<o.length;c++)o[c].add(s,a.length);return s},e.prototype.getVirtualListeners=function(e,t,n,r){void 0===n&&(n=!1);var o=void 0!==r?r:t.length;if(!n)for(var a=o-1;a>=0;a--){if(\"total\"===t[a].type){o=a+1;break}o=a}var i=this.virtualListeners.getDefault(t,function(){return new Map},o);return i.has(e)||i.set(e,new we),i.get(e)},e.prototype.setupDOMListener=function(e,t){var n=this;if(this.origin){var r=s(this.origin,e,!1,!1,t).subscribe({next:function(r){return n.onEvent(e,r,t)},error:function(){},complete:function(){}});this.domListeners.set(e,{sub:r,passive:t})}else this.domListenersToAdd.set(e,t)},e.prototype.setupNonBubblingListener=function(e){var t=this,n=e[0],r=e[1],o=e[2];if(this.origin){var a=r.call()[0];if(a){this.nonBubblingListenersToAdd.delete(e);var i=s(a,n,!1,!1,o.passive).subscribe({next:function(e){return t.onEvent(n,e,!!o.passive,!1)},error:function(){},complete:function(){}});this.nonBubblingListeners.has(n)||this.nonBubblingListeners.set(n,new Map);var c=this.nonBubblingListeners.get(n);if(!c)return;c.set(a,{sub:i,destination:o})}else this.nonBubblingListenersToAdd.add(e)}else this.nonBubblingListenersToAdd.add(e)},e.prototype.resetEventListeners=function(){for(var e=this.domListeners.entries(),t=e.next();!t.done;){var n=t.value,r=n[0],o=n[1],a=o.sub,i=o.passive;a.unsubscribe(),this.setupDOMListener(r,i),t=e.next()}},e.prototype.resetNonBubblingListeners=function(){var e,t=this,n=new Map,r=(e=n,function(t,n,r){var o;e.has(t)?(o=e.get(t)).set(n,r):((o=new Map).set(n,r),e.set(t,o))});this.nonBubblingListeners.forEach(function(e,o){e.forEach(function(e,n){if(document.body.contains(n))r(o,n,e);else{var a=e.sub,i=e.destination;a&&a.unsubscribe();var c=new b(i.scopeChecker.namespace,t.isolateModule).call()[0],h=s(c,o,!1,!1,i.passive).subscribe({next:function(e){return t.onEvent(o,e,!!i.passive,!1)},error:function(){},complete:function(){}});r(o,c,{sub:h,destination:i})}}),t.nonBubblingListeners=n})},e.prototype.putNonBubblingListener=function(e,t,n,r){var o=this.nonBubblingListeners.get(e);if(o){var a=o.get(t);a&&a.destination.passive===r&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(e,t,n,r){void 0===r&&(r=!0);var o=this.patchEvent(t),a=this.isolateModule.getRootElement(t.target);if(r){var i=this.isolateModule.getNamespace(t.target);if(!i)return;var s=this.getVirtualListeners(e,i);this.bubble(e,t.target,a,o,s,i,i.length-1,!0,n),this.bubble(e,t.target,a,o,s,i,i.length-1,!1,n)}else this.putNonBubblingListener(e,t.target,!0,n),this.doBubbleStep(e,t.target,a,o,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(e,t.target,!1,n),this.doBubbleStep(e,t.target,a,o,this.virtualNonBubblingListener,!1,n),t.stopPropagation()},e.prototype.bubble=function(e,t,n,r,o,a,i,s,c){s||r.propagationHasBeenStopped||this.doBubbleStep(e,t,n,r,o,s,c);var h=n,l=i;if(t===n){if(!(i>=0&&\"sibling\"===a[i].type))return;h=this.isolateModule.getElement(a,i),l--}t.parentNode&&h&&this.bubble(e,t.parentNode,h,r,o,a,l,s,c),s&&!r.propagationHasBeenStopped&&this.doBubbleStep(e,t,n,r,o,s,c)},e.prototype.doBubbleStep=function(e,t,n,r,o,a,i){n&&(this.mutateEventCurrentTarget(r,t),o.forEach(function(e){if(e.passive===i&&e.useCapture===a){var o=m(e.scopeChecker.namespace);!r.propagationHasBeenStopped&&e.scopeChecker.isDirectlyInScope(t)&&(\"\"!==o&&t.matches(o)||\"\"===o&&t===n)&&(c(r,e.preventDefault),e.subject.shamefullySendNext(r))}}))},e.prototype.patchEvent=function(e){var t=e;t.propagationHasBeenStopped=!1;var n=t.stopPropagation;return t.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},t},e.prototype.mutateEventCurrentTarget=function(e,t){try{Object.defineProperty(e,\"currentTarget\",{value:t,configurable:!0})}catch(e){console.log(\"please use event.ownerTarget\")}e.ownerTarget=t},e}();function Se(e){return i.a.merge(e,i.a.never())}function Oe(e){return e.elm}function Te(e){(console.error||console.log)(e)}!function(){function e(e){this._mockConfig=e,e.elements?this._elements=e.elements:this._elements=Object(o.adapt)(i.a.empty())}e.prototype.elements=function(){var e=this._elements;return e._isCycleSource=\"MockedDOM\",e},e.prototype.element=function(){var e=this.elements().filter(function(e){return e.length>0}).map(function(e){return e[0]}).remember(),t=Object(o.adapt)(e);return t._isCycleSource=\"MockedDOM\",t},e.prototype.events=function(e,t,n){var r=this._mockConfig[e],a=Object(o.adapt)(r||i.a.empty());return a._isCycleSource=\"MockedDOM\",a},e.prototype.select=function(t){return new e(this._mockConfig[t]||{})},e.prototype.isolateSource=function(e,t){return e.select(\".___\"+t)},e.prototype.isolateSink=function(e,t){return Object(o.adapt)(i.a.fromObservable(e).map(function(e){return e.sel&&-1!==e.sel.indexOf(\"___\"+t)?e:(e.sel+=\".___\"+t,e)}))}}();function Re(e){return function(e){return\"string\"==typeof e&&e.length>0}(e)&&(\".\"===e[0]||\"#\"===e[0])}function Ae(e){return function(t,n,o){var a=void 0!==t,i=void 0!==n,s=void 0!==o;return Re(t)?i&&s?Object(r.h)(e+t,n,o):i?Object(r.h)(e+t,n):Object(r.h)(e+t,{}):s?Object(r.h)(e+t,n,o):i?Object(r.h)(e,t,n):a?Object(r.h)(e,t):Object(r.h)(e,{})}}var Ce=[\"a\",\"altGlyph\",\"altGlyphDef\",\"altGlyphItem\",\"animate\",\"animateColor\",\"animateMotion\",\"animateTransform\",\"circle\",\"clipPath\",\"colorProfile\",\"cursor\",\"defs\",\"desc\",\"ellipse\",\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDistantLight\",\"feFlood\",\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMergeNode\",\"feMorphology\",\"feOffset\",\"fePointLight\",\"feSpecularLighting\",\"feSpotlight\",\"feTile\",\"feTurbulence\",\"filter\",\"font\",\"fontFace\",\"fontFaceFormat\",\"fontFaceName\",\"fontFaceSrc\",\"fontFaceUri\",\"foreignObject\",\"g\",\"glyph\",\"glyphRef\",\"hkern\",\"image\",\"line\",\"linearGradient\",\"marker\",\"mask\",\"metadata\",\"missingGlyph\",\"mpath\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialGradient\",\"rect\",\"script\",\"set\",\"stop\",\"style\",\"switch\",\"symbol\",\"text\",\"textPath\",\"title\",\"tref\",\"tspan\",\"use\",\"view\",\"vkern\"],Ee=Ae(\"svg\");Ce.forEach(function(e){Ee[e]=Ae(e)});var Ne=[\"a\",\"abbr\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"base\",\"bdi\",\"bdo\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"cite\",\"code\",\"col\",\"colgroup\",\"dd\",\"del\",\"details\",\"dfn\",\"dir\",\"div\",\"dl\",\"dt\",\"em\",\"embed\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"keygen\",\"label\",\"legend\",\"li\",\"link\",\"main\",\"map\",\"mark\",\"menu\",\"meta\",\"nav\",\"noscript\",\"object\",\"ol\",\"optgroup\",\"option\",\"p\",\"param\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"script\",\"section\",\"select\",\"small\",\"source\",\"span\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"title\",\"tr\",\"u\",\"ul\",\"video\"],$e={SVG_TAG_NAMES:Ce,TAG_NAMES:Ne,svg:Ee,isSelector:Re,createTagFunction:Ae};Ne.forEach(function(e){$e[e]=Ae(e)});var Ie=$e,je=(Ie.svg,Ie.a,Ie.abbr,Ie.address,Ie.area,Ie.article,Ie.aside,Ie.audio,Ie.b,Ie.base,Ie.bdi,Ie.bdo,Ie.blockquote,Ie.body,Ie.br,Ie.button,Ie.canvas,Ie.caption,Ie.cite,Ie.code,Ie.col,Ie.colgroup,Ie.dd,Ie.del,Ie.dfn,Ie.dir,Ie.div,Ie.dl,Ie.dt,Ie.em,Ie.embed,Ie.fieldset,Ie.figcaption,Ie.figure,Ie.footer,Ie.form,Ie.h1,Ie.h2,Ie.h3,Ie.h4,Ie.h5,Ie.h6,Ie.head,Ie.header,Ie.hgroup,Ie.hr,Ie.html,Ie.i,Ie.iframe,Ie.img,Ie.input,Ie.ins,Ie.kbd,Ie.keygen,Ie.label,Ie.legend,Ie.li,Ie.link,Ie.main,Ie.map,Ie.mark,Ie.menu,Ie.meta,Ie.nav,Ie.noscript,Ie.object,Ie.ol,Ie.optgroup,Ie.option,Ie.p);Ie.param,Ie.pre,Ie.progress,Ie.q,Ie.rp,Ie.rt,Ie.ruby,Ie.s,Ie.samp,Ie.script,Ie.section,Ie.select,Ie.small,Ie.source,Ie.span,Ie.strong,Ie.style,Ie.sub,Ie.sup,Ie.table,Ie.tbody,Ie.td,Ie.textarea,Ie.tfoot,Ie.th,Ie.thead,Ie.title,Ie.tr,Ie.u,Ie.ul,Ie.video;function Be(e,t){var n=calc(e[0],t,e[1]);if(18===n||20===n)score(n);else{var r=gameMonad.fetch4().slice();r.push(n),gameMonad.run([,,0,[],r,,])}}function Le(e){var t=e;commentMonad.html=[];var n=-1;t.map(e=>{var t=e.split(\"<o>\");2!=t.length&&(t=[\"malfunction\",\"8888\"]),t[1]=t[1].replace(/<<>>/g,\",\");var r=showFunc(t[0],pMname.x);n+=1,commentMonad.html.push(h(\"div#\"+n,[h(\"span\",t[0]+\" commented: \"+t[1].replace(/<<>>/g,\",\")),h(\"br\"),h(\"textarea#commit\",{props:{cols:55,rows:2},style:{display:r}},t[1]),h(\"button#deleteB\",{props:{innerHTML:\"delete\"},style:{display:r,fontSize:14}}),h(\"br\"),h(\"span\",\"***************************************************************\")]))})}!function(){var e=new Error(\"Cannot find module 'ramda'\");throw e.code=\"MODULE_NOT_FOUND\",e}(),function(){var e=new Error(\"Cannot find module '@cycle/xstream-run'\");throw e.code=\"MODULE_NOT_FOUND\",e}(),function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}(),function(){var e=new Error(\"Cannot find module './cycle-run.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}(),socket=new WebSocket(\"ws://schalk.net:3055\"),console.log(\"************************** h and clone *****************\"),h=r.h,clone=!function(){var e=new Error(\"Cannot find module 'ramda'\");throw e.code=\"MODULE_NOT_FOUND\",e}(),console.log(clone),console.log(\" END ************************** h and clone ***************** EBD\"),bNode=function(e){var t=styl(e.length);return h(\"div#bNode\",[h(\"button#0.num\",{style:{display:t[0]}},\" \"+e[0]+\" \"),h(\"button#1.num\",{style:{display:t[1]}},\" \"+e[1]+\" \"),h(\"button#2.num\",{style:{display:t[2]}},\" \"+e[2]+\" \"),h(\"button#3.num\",{style:{display:t[3]}},\" \"+e[3]+\" \")])},MonadState.prototype.dec=function(){return this.s[1]-=1,buttonNode=bNode(this.s[0][this.s[1]][4]),socket.send(`CG#$42,${pMgroup.x},${pMname.x},${this.s[0][this.s[1]][0]},${this.s[0][this.s[1]][1]}`),window[this.id]=this,this},MonadState.prototype.inc=function(){return this.s[1]+=1,buttonNode=bNode(this.s[0][this.s[1]][4]),socket.send(`CG#$42,${pMgroup.x},${pMname.x},${this.s[0][this.s[1]][0]},${this.s[0][this.s[1]][1]}`),window[this.id]=this,this},MonadState.prototype.run=function([e=this.s[0][this.s[1]][0],t=this.s[0][this.s[1]][1],n=this.s[0][this.s[1]][2],r=this.s[0][this.s[1]][3].slice(),o=this.s[0][this.s[1]][4].slice(),a=pMname.x,i=pMgroup.x]){pMscore.ret(e),pMgoals.ret(t),pMgroup.ret(i),this.s[1]+=1;var s=this.s.slice();return s[0].splice(this.s[1],0,[e,t,n,r,o,a,i]),this.s=s,buttonNode=bNode(o),window.gameMonad=new MonadState(\"gameMonad\",s)},MonadState3.prototype.init=function(e){this.s[0]=e,this.s[1]=this.s[0].split(\"<@>\"),this.s[1]=this.s[1].filter(e=>\"\"!=e),result444=Le(this.s[1])},MonadState3.prototype.append=function(e){this.s[0]=this.s[0]+e,this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),Le(this.s[1])},MonadState3.prototype.edit=function(e,t){console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),this.s[1].splice(e,1,t),this.s[0]=this.s[1].join(\"<@>\"),this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),console.log(\"this.s[1]\",this.s[1]),console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),Le(this.s[1])},MonadState3.prototype.remove=function(e){console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),console.log(this.s[1]),this.s[1]=this.s[1].filter(e=>\"\"!==e),console.log(this.s[1]),this.s[1].splice(e,1),console.log(this.s[1]),console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),this.s[0]=this.s[1].join(\"<@>\"),Le(this.s[1])},MonadState3.prototype.init=function(e){this.s[0]=e,this.s[1]=this.s[0].split(\"<@>\"),this.s[1]=this.s[1].filter(e=>\"\"!=e),result444=Le(this.s[1])},MonadState3.prototype.append=function(e){this.s[0]=this.s[0]+e,this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),Le(this.s[1])},MonadState3.prototype.edit=function(e,t){console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),this.s[1].splice(e,1,t),this.s[0]=this.s[1].join(\"<@>\"),this.s[1]=this.s[0].split(\"<@>\").filter(e=>\"\"!=e),console.log(\"this.s[1]\",this.s[1]),console.log(\"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedit in edit\"),Le(this.s[1])},MonadState3.prototype.remove=function(e){console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),console.log(this.s[1]),this.s[1]=this.s[1].filter(e=>\"\"!==e),console.log(this.s[1]),this.s[1].splice(e,1),console.log(this.s[1]),console.log(\"QQQQQQQQQQQQQQQQQQQQQQQQQQ In remove. this.s[1]\"),this.s[0]=this.s[1].join(\"<@>\"),Le(this.s[1])},it7=()=>mMZ52.bnd(e=>{callOrder=callOrder>24?1:callOrder+1,1===callOrder&&(start77=Date.now()),m42_.push(callOrder+\"  \"),m42_.push(e),m42_.push(h(\"br\")),25===callOrder&&m42_.push(\"Elapsed time: \"+(Date.now()-start77)+\" ms\")}),it7_b=()=>mMZ53.bnd(e=>{callOrder2=callOrder2>24?1:callOrder2+1,1===callOrder2&&(start78=Date.now()),m43_.push(callOrder2+\"  \"),m43_.push(e),m43_.push(h(\"br\")),25===callOrder2&&m43_.push(\"Elapsed time: \"+(Date.now()-start78)+\" ms\")});var Qe=()=>{var e=[];bind(1)(addP(2))(cubeC)(addC(3))(multP(2))(multC(3))(addC(30))(multP(.2))(it4)(it6)(it7)().slice(1,9).map(t=>t.then(t=>{e.push(t.x),freday=e.join(\" \"),diffRender()}))};socket.onclose=function(e){console.log(\"<><><> ALERT - socket is closing. <><><> \",e)},function e(){console.log(\"00000000000000000000000000000000 Entering login\",socket.readyState);setTimeout(function(){if(1===socket.readyState){console.log(\"readyState is\",socket.readyState);var t=Math.random().toString().substring(5);t.toString().substring(2);playerName=t,playerGroup=\"solo\",pMname.ret(t),pMoldName.ret(t),pMgroup.ret(\"solo\"),gameMonad.run([0,0,0,[],[7,7,7,7],t,\"solo\"]);var n=t+\"<o>password\";socket.send(\"CC#$42\"+n),pMcombo.ret(n),pMclicked.ret([]),socket.send(`GZ#$42,solo,${t}`)}else e()},1e3)}(),diffRender=()=>document.getElementById(\"diffRender\").click(),sources.DOM=function(e,t){t||(t={}),p(e);var n=t.modules||ve;!function(e){if(!Array.isArray(e))throw new Error(\"Optional modules option must be an array for snabbdom modules\")}(n);var r,o,a=new _e,s=N([a.createModule()].concat(n)),c=i.a.create({start:function(e){\"loading\"===document.readyState?document.addEventListener(\"readystatechange\",function(){var t=document.readyState;\"interactive\"!==t&&\"complete\"!==t||(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}}),h=i.a.create({start:function(e){o=new MutationObserver(function(){return e.next(null)})},stop:function(){o.disconnect()}});return function(t,n){void 0===n&&(n=\"DOM\"),function(e){if(!e||\"function\"!=typeof e.addListener||\"function\"!=typeof e.fold)throw new Error(\"The DOM driver function expects as input a Stream of virtual DOM elements\")}(t);var l=i.a.create(),u=c.map(function(){var t=function(e){var t=\"string\"==typeof e?document.querySelector(e):e;if(\"string\"==typeof e&&null===t)throw new Error(\"Cannot render into unknown element `\"+e+\"`\");return t}(e)||document.body;return r=new se(t),t}),p=t.remember();p.addListener({}),h.addListener({});var d=u.map(function(e){return i.a.merge(p.endWhen(l),l).map(function(e){return r.call(e)}).startWith((t=Object(L.toVNode)(e),t.data=t.data||{},t.data.isolate=[],t)).fold(s,Object(L.toVNode)(e)).drop(1).map(Oe).startWith(e).map(function(e){return o.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),e}).compose(Se);var t}).flatten(),m=I()(c,h).endWhen(l).compose(B()(d)).map(function(e){return e[1]}).remember();m.addListener({error:Te});var f=new De(m,a);return new _(m,l,[],a,f,n)}}(\"#main-container\"),sources.WS=function(){return xs.create({start:e=>{socket.onmessage=t=>e.next(t)},stop:()=>{socket.close()}})},sources.GD=gridDriver,function(){var e=new Error(\"Cannot find module '@cycle/xstream-run'\");throw e.code=\"MODULE_NOT_FOUND\",e}().run(function(e){console.log(\"0^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ got to main()\");const t=e.WS.map(e=>{var r=e.data.split(\",\"),o=(r[1],r[2]),a=r[3],i=r[4];mMZ9.bnd(()=>{console.log(\"sender is\",o),console.log(\"extra is\",a),console.log(\"The full message is\",e),console.log(\"v is\",r)}),mMZ10.bnd(()=>{o===pMname.x?gameMonad.run([r[7],r[8],0,[],[r[3],r[4],r[5],r[6]]]):gameMonad.run([,,,[],[r[3],r[4],r[5],r[6]]])}),mMZ11.bnd(()=>{console.log(\"The message arrived\",t);var e=r.slice(3,r.length).join(\", \"),n=r[2]+\": \"+e;messages.unshift(h(\"span\",n),h(\"br\")),console.log(\"The message was typeof ar\",typeof n)}),mMZ12.bnd(()=>{mMgoals2.ret(\"The winner is \"+r[2]),setTimeout(function(){mMgoals2.ret(\"\")},700)}),mMZ13.bnd(()=>{mMgoals2.ret(\"A player named \"+r[2]+\" is currently logged in. Page will refresh in 4 seconds.\"),refresh()}),mMZ14.bnd(()=>{var t=e.data.split(\"<$>\")[1];return console.log(\"In mZ14.bnd - - ar is\",t),console.log(\"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzztaskMonad\",taskMonad),taskMonad.init(t)}),mMZ15.bnd(()=>{var e=[],t=r[3].slice(),n=t.split(\"<$!$>\"),o=n.map(r=>{console.log(\"In mMZ15.bnd ar, arr, arr2, and arr3 are\",e,t,n,o),e.push(r),e.push(h(\"br\"))});gameData=e}),mMZ16.bnd(()=>{var e=mMcommentStr.x;\"code1\"===i&&(mMregister.ret(\"The registered name \"+a+\" and the associated password were recognized. \"),socket.send(\"GZ#$42,\"+pMgroup.x+\",\"+pMname.x+\",<@>\"+e)),\"code2\"===i&&(mMregister.ret(\"The new name \"+a+\" was registered.\"),socket.send(\"GZ#$42,\"+pMgroup.x+\",\"+pMname.x+\",<@>\"+e)),\"code3\"===i&&(pMname.ret(o),mMregister.ret(\"The password you entered is not the password that is registered for \"+tempName+\".\"),mMshowRegister.ret(\"inline\"))}),mMZ17.bnd(()=>{var e=a.substring(0,a.length-3);\"\"!==(e=(e=e.replace(/<@><@>/g,\"<@>\")).replace(//g,\"\"))&&commentMonad.init(e)}),mMZ18.bnd(()=>{commentMonad.append(a)}),mMZ19.bnd(()=>{commentMonad.edit(a,i),console.log(\"In mMZ19 to edit a comment. <><><><><><><> extra, extra2:\",a,i)}),mMZ20.bnd(()=>{commentMonad.remove(parseInt(a,10))}),mMZ21.bnd(()=>{console.log(\"ooooooooooooooooooo New task from the server\",a),taskMonad.append(a)}),mMZ22.bnd(()=>{taskMonad.edit(r[3],r[4])}),mMZ23.bnd(()=>{console.log(\"In mMZ23 -- v[3] is\",r[3]),taskMonad.toggle(r[3])}),mMZ24.bnd(()=>{taskMonad.delete(r[3])}),mMZ25.bnd(()=>{console.log(\"QQQQQQ  Bingo! extra is QQQQQQQWWWWWWWWWWQQQQQQQQ in mMZ25.bnd. \",a),taskMonad.html=taskMonad.init(a)}),mMZ27.bnd(()=>{console.log(\"mMZ27 v[3]\",r[3]),mMZ38.release(r[3])}),mMZ28.bnd(()=>{playerName===o?mMZ40.release(r[3]):console.log(\"message from sender to BC#$42\")}),mMZ29.bnd(()=>{playerName===o?mMZ41.release(r[3]):console.log(\"message from sender to BD#$42\")}),mMZ30.bnd(()=>{playerName===o?mMZ42.release(r[3]):console.log(\"message from sender to BE#$42\")}),ret(r[0]).bnd(n,\"CC#$42\",mMZ9).bnd(n,\"CA#$42\",mMZ10).bnd(n,\"CD#$42\",mMZ11).bnd(n,\"CE#$42\",mMZ12).bnd(n,\"EE#$42\",mMZ13).bnd(n,\"TD#$42\",mMZ14).bnd(n,\"NN#$42\",mMZ15).bnd(n,\"RR#$42\",mMZ16).bnd(n,\"GZ#$42\",mMZ17).bnd(n,\"GN#$42\",mMZ18).bnd(n,\"GE#$42\",mMZ19).bnd(n,\"GD#$42\",mMZ20).bnd(n,\"TA#$42\",mMZ21).bnd(n,\"TE#$42\",mMZ22).bnd(n,\"TT#$42\",mMZ23).bnd(n,\"TX#$42\",mMZ24).bnd(n,\"TI#$42\",mMZ25).bnd(n,\"BB#$42\",mMZ27).bnd(n,\"BC#$42\",mMZ28).bnd(n,\"BD#$42\",mMZ29).bnd(n,\"BE#$42\",mMZ30)});function n(e,t,n,r){return e==t&&n.release(r),ret(e)}var r=e.DOM.select(\"#makeBind\").events(\"click\").map(()=>bindTest()),o=(h(\"div\",\"ready\"),h(\"div\",\"ready\"),e.DOM.select(\"#comment\").events(\"keydown\").map(e=>{if(13==e.keyCode){e.preventDefault();var t=e.target.value.replace(/,/g,\"<<>>\");t=pMname.x+\"<o>\"+t,socket.send(`GN#$42,${pMgroup.x},${pMname.x},<@>${t}<@>`)}})),a=e.DOM.select(\"#deleteB\").events(\"click\").map(function(e){var t=parseInt(e.target.parentElement.id,10),n=commentMonad.s[1].slice(t,t+1)[0];socket.send(`GD#$42,${pMgroup.x},${pMname.x},${t},${n}`)}),i=e.DOM.select(\"textarea#commit\").events(\"keydown\").map(function(e){if(13==e.keyCode){var t=parseInt(e.target.parentElement.id,10),n=e.target.value.split(\",\"),r=pMname.x+\"<o>\"+n.join(\"<<>>\"),o=commentMonad.s[1].slice(t,t+1)[0];socket.send(`GE#$42,${pMgroup.x},${pMname.x},${t},${o},${r}`)}}),s=e.DOM.select(\"input.register\").events(\"keypress\").map(e=>{mMerror.ret(\"\");var t=e.target.value,n=(t.match(/,/g)||[]).length;nameMess=0===n?\"Please enter a name, a comma, and a password\":n>1?\"Commas are not allowed in names or passwords\":\"\";var r=t.split(\",\");if(13===e.keyCode){if(mMerror.ret(\"\"),2!=r.length)return void mMerror.ret(\" There should be one and only one comma\");var o=r[0];pMname.ret(r[0]),tempName=o;var a=r.join(\"<o>\");mMshowRegister.ret(\"none\"),playerName=o,console.log(\"pMname.x is\",pMname.x),console.log(pMname.x===playerName),socket.send(`RR#$42,${pMgroup.x},${pMoldName.x},${a}`),setTimeout(function(){socket.send(`CG#$42,${pMgroup.x},${o},${pMscore.x},${pMgoals.x}`)},700)}}),c=e.DOM.select(\"input#group\").events(\"keypress\").map(e=>{if(13===e.keyCode&&e.target.value){var t=e.target.value.replace(/,/g,\"\");pMgroup.ret(t),send(\"CO#$42\",t),gameMonad.run([0,0,0,[],[0,0,0,0],,t]),socket.send(`TI#$42,${t},${pMname.x}`)}}),l=e.DOM.select(\"input.inputMessage\").events(\"keydown\").map(function(e){13===e.keyCode&&(socket.send(`CD#$42,${pMgroup.x},${pMname.x},${e.target.value}`),e.target.value=\"\")}),u=e.DOM.select(\"#m80\").events(\"change\").map(()=>{});function p(e){var t=Math.sqrt(e[0]*e[5]+e[1]*e[4]),n=Math.sqrt(e[2]*e[7]+e[3]*e[6]),r=Math.sqrt(e[8]*e[13]+e[9]*e[12]),o=Math.sqrt(e[10]*e[15]+e[14]*e[11]);return Math.sqrt(t*o+n*r)}var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],f=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]];function g(e){var t=e;return[h(\"button#mR0.mR\",t[0]),h(\"button#mR1.mR\",t[1]),h(\"button#mR2.mR\",t[2]),h(\"button#mR3.mR\",t[3]),h(\"button#mR4.mR\",t[4]),h(\"button#mR5.mR\",t[5]),h(\"button#mR6.mR\",t[6]),h(\"button#mR7.mR\",t[7]),h(\"button#mR8.mR\",t[8]),h(\"button#mR9.mR\",t[9]),h(\"button#mR10.mR\",t[10]),h(\"button#mR11.mR\",t[11]),h(\"button#mR12.mR\",t[12]),h(\"button#mR13.mR\",t[13]),h(\"button#mR14.mR\",t[14]),h(\"button#mR15.mR\",t[15])]}var b=[h(\"button#mR0.mR\",0),h(\"button#mR1.mR\",1),h(\"button#mR2.mR\",2),h(\"button#mR3.mR\",3),h(\"button#mR4.mR\",4),h(\"button#mR5.mR\",5),h(\"button#mR6.mR\",6),h(\"button#mR7.mR\",7),h(\"button#mR8.mR\",8),h(\"button#mR9.mR\",9),h(\"button#mR10.mR\",10),h(\"button#mR11.mR\",11),h(\"button#mR12.mR\",12),h(\"button#mR13.mR\",13),h(\"button#mR14.mR\",14),h(\"button#mR15.mR\",15)];function v(e,t,n=m,r=f,o=b,a=mMindexDS){console.log(\"In rExchange i is\",a);var i=n,s=i[e];i[e]=i[t],i[t]=s,console.log(i);var c=i.slice();return r.splice(a.x,0,c),console.log(r),g(i)}var y=e.DOM.select(\"#mR0\").events(\"click\").map(e=>{console.log(\"e is\",e),rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),_=e.DOM.select(\"button#mR1.mR\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),M=e.DOM.select(\"#mR2.mR\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),w=e.DOM.select(\"button#mR3\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),k=e.DOM.select(\"button#mR4\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),D=e.DOM.select(\"button#mR5\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),S=e.DOM.select(\"button#mR6\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),O=e.DOM.select(\"button#mR7\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),T=e.DOM.select(\"button#mR8\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),R=e.DOM.select(\"button#mR9\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),A=e.DOM.select(\"button#mR10\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),C=e.DOM.select(\"button#mR11\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),E=e.DOM.select(\"button#mR12\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),N=e.DOM.select(\"button#mR13\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),$=e.DOM.select(\"button#mR14\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),I=e.DOM.select(\"button#mR15\").events(\"click\").map(e=>{rADS.push(toInt(e.target.id.slice(2,4))),2===rADS.length&&(mMindexDS.ret(mMindexDS.x+1),v(rADS[0],rADS[1]),rADS=[])}),j=e.DOM.select(\"#gridInput\").events(\"change\"),B=e.DOM.select(\"#gridBack\").events(\"click\").map(()=>{mMindexDS.x>0&&(mMindexDS.ret(mMindexDS.x-1),m=f[mMindexDS.x].slice())}),L=e.DOM.select(\"#gridForward\").events(\"click\").map(()=>{mMindexDS.x+1<f.length&&(mMindexDS.ret(mMindexDS.x+1),m=f[mMindexDS.x].slice())}),Q=e.DOM.select(\"#roll\").events(\"click\").map(()=>{var e=gameMonad.fetch0()-1,t=gameMonad.fetch1();socket.send(`CA#$42,${pMgroup.x},${pMname.x},6,6,12,20,${e},${t}`)}),z=e.DOM.select(\".num\").events(\"click\").map(e=>{if(gameMonad.fetch3().length<2){var t=gameMonad.fetch3(),n=gameMonad.fetch4();t.push(n.splice(e.target.id,1)[0]),gameMonad.run([,,,t,n,,]),2===t.length&&0!=gameMonad.fetch2()&&Be(t,gameMonad.fetch2())}}).startWith([0,0,0,0]),F=e.DOM.select(\".op\").events(\"click\").map(e=>{var t=gameMonad.fetch3();2===t.length?Be(t,e.target.innerHTML):gameMonad.run([,,e.target.innerHTML,,,,])}),P=e.DOM.select(\"#ahead.tao1\").events(\"click\"),Z=e.DOM.select(\"#back.tao100\").events(\"click\").map(()=>{gameMonad.s[1]>0&&gameMonad.dec()}),W=P.map(()=>{gameMonad.s[1]<gameMonad.s[0].length-1&&gameMonad.inc()}),G=e.DOM.select(\"#pr1\").events(\"click\").map(e=>{proxyResult=count.next}),q=e.DOM.select(\"#pr2\").events(\"click\").map(e=>{proxyResult=count.previous}),H=e.DOM.select(\"#pr3\").events(\"click\").map(e=>{proxyResult=count.factorial}),U=e.DOM.select(\"#pr4\").events(\"click\").map(e=>{proxyResult=count.primes}),V=e.DOM.select(\"#pr5\").events(\"click\").map(e=>{proxyResult=count.ints}),J=e.DOM.select(\"#fibNum\").events(\"keypress\").map(e=>{13===e.keyCode&&(F_17=f17(Math.abs(Math.floor(toInt(e.target.value)))),F_18=f17(Math.abs(Math.floor(toInt(e.target.value))),0,1,!0))}),Y=e.DOM.select(\"#itter\").events(\"keypress\").map(e=>{13===e.keyCode&&h(\"div\",styleFunc([\"#FFD700\",,\"16px\",,,]),bind(pInt(e.target.value))(e=>e)(()=>mMZ23.bnd(e=>e*e*e))(()=>3)(e=>mMZ23.release(3)+e)(e=>e*e/ar[1])(terminate).join(\", \"))}),K=e.DOM.select(\"#double\").events(\"keypress\").map(e=>{var t=\"\";13===e.keyCode&&bind(3)(cubeP)(addP(3))(e=>ar[1].then(t=>t-75+e*ar[0]))(terminate).map(e=>e.then?e.then(e=>t=t+e+\", \"):t=t+e+\", \")}),X=e.DOM.select(\"input#code\").events(\"keydown\").map(function(e){var t;\"\"!==e.target.value&&(13===e.keyCode&&(mM21.ret(e.target.value),(t=[0,1,e.target.value])[2]>1?mMfib.ret([t[1],t[0]+t[1],t[2]-1]):mM19.ret(t[0])))}),ee=e.DOM.select(\"input#demo2\").events(\"keydown\").map(function(e){\"\"!==e.target.value&&13===e.keyCode&&(Bind.bind1=[],bind1(e.target.value)(cubeP)(()=>idP(Bind.bind1[0]-Bind.bind1[1]))(e=>addP(Bind.bind1[1])(e)))}),te=2,ne=[2],re=[2];const oe=e.WWB.map(e=>{if(\"color\"===e.data[3])fill1Monad.ret(e.data[0]),fill2Monad.ret(e.data[1]),fill3Monad.ret(e.data[2]),mMprimeBlurb.ret(e.data[5]),mMfibBlurb.ret(e.data[4]),mMprimeFibBlurb.ret(e.data[6]);else if(ne=e.data[1].join(\", \"),re=e.data[2].join(\", \"),mMelapsed.ret(elapsed(e.data[3])),e.data[0].length>primeState2.length){primeState2=e.data[0],fibState=e.data[1],prFibState=e.data[2];var t=primeState2.slice(-1);te=t.toString()}});var ae=e.DOM.select(\"input#fib92\").events(\"keyup\").map(e=>{var t=e.target.value,n=Math.sqrt(t);if(primeState2.slice(-1)[0]>n){var r=Date.now(),o=fibState.slice(0,fibState.indexOf(fibState.find(e=>e>t)));ne=o.join(\", \");var a=o.filter(e=>-1!==prFibState.indexOf(e));re=a.join(\", \"),mMelapsed.ret(elapsed(r)),diffRender()}else workerB.postMessage([primeState2,fibState,prFibState,t])}),ie=e.DOM.select(\"#clearprimes\").events(\"click\").map(()=>mMres.ret([mMres.x[0],\"\",mMres.x[2],mMres.x[3]]));m42_RES=[],m43_RES=[];var se=e.DOM.select(\"button.clear_P\").events(\"click\").map(e=>{m42_RESULT=[],m42_RESULT2=[]}),ce=e.DOM.select(\"button.factors_P\").events(\"click\").map(function(e){mMfactors3.ret(\"\"),bind(65)(cubeC)(it4)(it6)(it7)});workerG$=e.WWG.map(e=>(console.log(\"Message from workerG\",e),_e=ye(e.data),mMZ38.release(e.data),e.data?(console.log(\"GOOD m.data\"),e.target?(console.log(\"GOOD m.target\"),e.data[1]?(console.log(\"GOOD m.data[1]\"),e.target.ar2?void console.log(\"GOOD m.data.ar2\"):\"dung\"):\"donkey\"):\"shit\"):\"cow\")),workerL$=e.WWL.map(e=>(console.log(\"Message from workerL$ MMMMMMMMMMMMMMMMMMMMMMMMMM Here it is:\",e),we=Me(e.data),console.log(\"Still in workerL$ -- m779_RESULT is\",we),mMZ39.release(e.data),e.data?(console.log(\"GOOD m.data\"),e.target?(console.log(\"GOOD m.target\"),e.data[1]?(console.log(\"GOOD m.data[1]\"),e.target.ar2?void console.log(\"GOOD m.data.ar2\"):\"dung\"):\"donkey\"):\"shit\"):\"cow\"));var he=e.DOM.select(\"button.clear_R\").events(\"click\").map(()=>{m43_=[]}),le=e.DOM.select(\"button#factors_R\").events(\"click\").map(e=>{var t=0;m43_=[];for(var n=new Bnd3;t<25;)n.run(145)(e=>e**3)(it4_b)(it6_b)(it7_b)(),t+=1}),ue=e.DOM.select(\"button#aplus\").events(\"click\").map(()=>{_count.add_a}),pe=e.DOM.select(\"button#aminus\").events(\"click\").map(()=>{_count.subtract_a}),de=e.DOM.select(\"button#bplus\").events(\"click\").map(()=>{_count.add_b}),me=e.DOM.select(\"button#bminus\").events(\"click\").map(()=>{_count.subtract_b}),fe=e.DOM.select(\"button#resetState\").events(\"click\").map(()=>{_count.resetState}),ge=e.DOM.select(\"#stateA\").events(\"keyup\").map(e=>{_state.a=toFloat(e.target.value),_count.go}),be=e.DOM.select(\"#stateB\").events(\"keyup\").map(e=>{_state.b=toFloat(e.target.value),_count.go});workerH$=e.WWH.map(e=>{mMZ52.release(e.data[1]);e.data[0][e.data[0].length-1];e.data[0].length>primeState.length&&(primeState=e.data[0])});var ve=e.DOM.select(\"input#factors\").events(\"keypress\").map(function(e){13===e.keyCode&&bind(e.target.value)(it8)});workerL$=e.WWL.map(e=>{mMZ53.release(e.data[1]);e.data[0][e.data[0].length-1];e.data[0].length>primeState.length&&(primeState=e.data[0])}),workerM$=e.WWM.map(e=>{mMZ53.release(e.data[1]);e.data[0][e.data[0].length-1];e.data[0].length>primeState.length&&(primeState=e.data[0])}),ve=e.DOM.select(\"input#factors\").events(\"keypress\").map(function(e){13===e.keyCode&&bind(e.target.value)(it8)}),mMZ40.bnd(e=>{console.log(\"Now <E><E><E><E><E><E><E><Edward the Late>>>>>>>>>>posting to workerH -- v is\",e),workerH.postMessage([primeState,e])}),mMZ41.bnd(e=>{console.log(\"Now <E><E><E><E><E><E><E><Edward the Late>>>>>>>>>>posting to workerL -- v is\",e),workerL.postMessage([primeState,e])});const ye=e=>h(\"div\",[_e,h(\"br\"),h(\"span\",bigBlue,e[3]),h(\"span\",bigGreen,e[0]),h(\"span\",bigBlue,e[4]),h(\"span\",bigRed,e[5])]);var _e=h(\"div\",\"\");const Me=e=>h(\"div\",[we,h(\"br\"),h(\"span\",bigBlue,e[3]),h(\"span\",bigGreen,e[0]),h(\"span\",bigBlue,e[4]),h(\"span\",bigRed,e[5])]);var we=h(\"div\",\"\"),xe=e=>mMZ33.bnd(e=>{mMt32=new Monad(e,\"mMt32\"),mMt33.ret(e+\" cubed is \"+e*e*e),xe(e+1)});xe(0);var ke=e.DOM.select(\"#testZ\").events(\"click\").map(function(){mMZ33.release(mMt32.x+1)}),De=e.DOM.select(\"#testQ\").events(\"click\").map(()=>{mMZ33.release(0),diffRender()}),Se=e.DOM.select(\"#testW\").events(\"keypress\").map(function(e){13===e.keyCode&&(mMZ33.release(parseInt(e.target.value,10)),diffRender())}),Oe=e=>t=>n=>h(\"div\",[h(\"pre\",e,\" ping        ---\\x3e \"),h(\"pre\",t,\"                 <---        pong \"),h(\"pre\",\"          -- SCORE: ping: \"+n[0]+\" pong: \"+n[1])]);m67_RESULT=Oe(_A1)(_A3)([3,2]),PingpongMaker=e=>{var t=_A1,n=_A3,r=[0,0],o=0,a=Math.floor(7*Math.random())+1;return function i(){if(!(r[0]>10||r[1]>10)){var s=400;t===_A3?(t=_A1,n=_A3):t===_A1&&(t=_A3,n=_A2),o<=a?(o+=1,window[e]=Oe(t)(n)(r),diffRender()):o%2==0?(s=600,o=0,r[0]+=1,window[e]=Oe(_A1)(_A3)(r),diffRender(),a=Math.floor(7*Math.random())+1):o%2==1&&(s=600,o=0,r[1]+=1,window[e]=Oe(_A3)(_A2)(r),diffRender(),a=Math.floor(7*Math.random())+1),setTimeout(function(){i()},s)}}};var Te=e=>t=>t=>t=>n=>{\"serve\"===r&&(r=_A3);var r=e?_A1:_A3,o=e?_A3:_A2;pingDisplay=(e=>t=>n=>h(\"div\",[h(\"pre\",e,\" ping        ---\\x3e \"),h(\"pre\",t,\"                 <---        pong \"),h(\"pre\",\"          -- SCORE: ping: \"+n[0]+\" pong: \"+n[1])]))(r)(o)(t)(d)},Re=[0,0];pp4=()=>{var e,t=_A3,n=_A2,r=_A3,o=0,a=0,i=!0,s=300;return e=()=>{Te(i=!i)(t)(n)(r),diffRender(),0===o&&(o=Math.floor(11*Math.random())+1),setTimeout(function(){(Re[0]>=11||Re[1]>=11)&&(diffRender(),a=0,o=0,Re=[0,0]),a>=o&&a%2==0&&(Re[0]+=1,a=0,o=0,diffRender()),a>=o&&a%2==1&&(Re[1]+=1,a=0,o=0,diffRender()),s=a<o?300:900,a+=1,diffRender(),e()},s)}};var Ae=e.DOM.select(\"button.pingpong\").events(\"click\").map(()=>{PingpongMaker(\"m67_RESULT\")(),PingpongMaker(\"m68_RESULT\")(),PingpongMaker(\"m69_RESULT\")()});Re=[0,0],pingScore2=[0,0],pingScore3=[0,0];const Ce=e=>t=>n=>r=>\"boolean\"!=typeof e?(window[t]=window[t]===_A3?_A1:_A3,window[n]=window[t]===_A3?_A2:_A3,void diffRender()):e?(window[t]=_A1,window[n]=_A3,window[r][0]+=1,void diffRender()):(window[t]=_A3,window[n]=_A2,window[r][1]+=1,void diffRender()),Ee=e.WWI.map(e=>{\"game over\"!==e.data&&(Ce(e.data)(\"ping43\")(\"ping44\")(\"pingScore\"),Ce(e.data)(\"ping45\")(\"ping46\")(\"pingScore2\"),Ce(e.data)(\"ping47\")(\"ping48\")(\"pingScore3\"),workerI.postMessage(e.data),diffRender())});e.DOM.select(\"button.pingpong4\").events(\"click\").map(()=>{pp4(\"ping43\")(\"ping44\")(\"pingScr1\")});var Ne=h(\"button#fredButton\",\"fredButton\");h(\"button#diffRender\",\"diffRender\"),e.FD.map(e=>{freday=e});var $e=e.DOM.select(\"div#fredB\").events(\"click\").map(e=>{freday=[],diffRender()}),Ie=e.DOM.select(\"button#fredB\").events(\"click\").map(()=>{freday=[],Qe()}),Le=e.BD.map(e=>console.log(\"Say what?\",e));const ze=e.WWC.map(e=>{console.log(\"The message arriving from workerC is\",e.data),mMfactors.ret(e.data[1]);e.data[0][e.data[0].length-1];e.data[0].length>primeState.length&&(primeState=e.data[0])});var Fe=e.DOM.select(\"input#factors_5\").events(\"keyup\"),Pe=Fe.map(function(e){mMfactors7.ret(\"\");if(13===e.keyCode){var t=e.target.value.split(\",\").map(e=>parseInt(e,10));if(t[0]!=t[0]||t[1]!=t[1]||\"number\"!=typeof t[0]||\"number\"!=typeof t[1])return void mMfactors7.ret(\"It works only if you enter two integers separated by a comma.\");workerD.postMessage([primesMonad.s,t,decompMonad.s,\"Happy, happy\"])}});const Ze=e.WWD.map(e=>{mMfactors6.ret(e.data[0][3]),window.primesMonad=new MonadState(\"primesMonad\",e.data[0],primes_state),mMfactors8.ret(e.data[1])});var We=e.DOM.select(\"input#factors_1\").events(\"keydown\").map(function(e){if(13===e.keyCode){var t=e.target.value,n=Math.sqrt(t);if(primeState.slice(-1)[0]>n)var r=primeState.slice(0,primeState.indexOf(primeState.find(e=>e>t)));else r=primeState;workerE.postMessage([r,t])}});const Ge=e.WWE.map(e=>{mMfactors.ret(e.data[1])});var qe=e.DOM.select(\"input#factors_5b\").events(\"keyup\"),He=qe.map(function(e){mMfactors7.ret(\"\");if(13===e.keyCode){var t=e.target.value.split(\",\").map(e=>parseInt(e,10));if(console.log(\"In fA$ ar is\",t),t[0]!=t[0]||t[1]!=t[1]||\"number\"!=typeof t[0]||\"number\"!=typeof t[1])return void mMfactors7.ret(\"It works only if you enter two integers separated by a comma.\");workerF.postMessage([primesMonad.s,t,decompMonad.s])}});const Ue=e.WWF.map(e=>{console.log(\"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz -> Back in the main thread. m is\",e),mMfactors6_b.ret(e.data[2][3]),window.primesMonad=new MonadState(\"primesMonad\",e.data[0],primes_state),window.decompMonad=new MonadState(\"decompMonad\",e.data[2],primes_state),mMfactors8_b.ret(e.data[1])});var Ve=e.DOM.select(\"input#factors800\").events(\"keyup\").map(function(e){mMfactors800.ret(\"\");var t=e.target.value.split(\",\").map(e=>parseInt(e,10));if(13===e.keyCode){if(t[0]!=t[0]||t[1]!=t[1]||\"number\"!=typeof t[0]||\"number\"!=typeof t[1])return void mMfactors7.ret(\"It works only if you enter two integers separated by a comma.\");mMfactors800.ret(simpleWay(t[0],t[1]))}});function Je(e,t,n){var r=new Monad(t(e),n);return window[n]=r,r}document.onload=function(e){console.log(\"onload event: \",e),mMitterfib5.release(200)},function e(){var t=makeBind();mMZ3.bnd(n=>{t=t.b(n),mMquad4.ret(\"\"),mMquad6.ret(\"\"),mMquad5.ret(n+\" * x * x \"),mMZ3.bnd(t=>{mMquad6.ret(t+\" * x \"),mMZ3.bnd(r=>{mMtemp.ret([n,t,r]).bnd(Je,qS4,\"mMtemp2\").bnd(o=>{let a=o[0],i=o[1];return 0===a?(mMquad5.ret(\"No solution\",mMtemp),mMquad6.ret(\" \"),void e()):0===i?(mMquad5.ret(\"No solution\"),mMquad6.ret(\" \"),void e()):(mMquad4.ret(\"Solutiions for \"+n+\", \"+t+\" and \"+r+\" are \"+a+\" and  \"+i),mMquad5.ret(je(n).text+\" * \"+a+\" * \"+a+\" + \"+je(t).text+\" * \"+a+\" \"+je(r).text+\" = 0\"),mMquad6.ret(je(n).text+\" * \"+i+\" * \"+i+\" + \"+je(t).text+\" * \"+i+\" \"+je(r).text+\" = 0\"),void e())})})})})}();var Ye=e.DOM.select(\"#quad\").events(\"keypress\").map(function(e){13===e.keyCode&&(mMZ3.release(e.target.value),document.getElementById(\"quad\").value=null)});!function(e){var t=e,n=e}(e=>t=>n=>e+t+n),foo(4),foo(5),foo(6),foo(7),foo(8),foo(9);var Ke=e.DOM.select(\"#qF1\").events(\"keypress\");oneAction$=Ke.map(e=>{13===e.keyCode&&(et(e.target.value),e.target.value=null)});var Xe,et=(Xe=new Bnd3,e=>{if(Xe.run(toFloat(e)),console.log(\"In ann23 -- ob is\",Xe),3===Xe.ar.length){var t=Xe.ar[0],n=Xe.ar[1],r=Xe.ar[2];Xe.ar=[];var o=(-n-Math.sqrt(n*n-4*t*r))/(2*t),a=(-n+Math.sqrt(n*n-4*t*r))/(2*t);o==o&&(Cow1=`${t}*x*x + ${n}*x + ${r} = 0 has the following solutions:`,Cow2=`x = ${o} and x = ${a}`),o!=o&&(Cow1=`${t}*x*x + ${n}*x + ${r} = 0 has no solution`,Cow2=\"\")}}),tt=e.DOM.select(\"#qF1x\").events(\"keypress\");twoAction$=tt.map(e=>{13===e.keyCode&&(quadOb.fu(toFloat(e.target.value)),e.target.value=null)});var nt=e.DOM.select(\"#qF2x\").events(\"keypress\");threeAction$=nt.map(e=>{13===e.keyCode&&(console.log(\"798798787657657 (*&(*&(*&(*&(*&(*&(*798798787657657%&%&%&%&%\",e.target.value),go_6(toFloat(e.target.value)),e.target.value=null)});var rt=e.DOM.select(\"#foocow\").events(\"keypress\").map(function(e){13===e.keyCode&&runFoo(toInt(e.target.value))}),ot=e.DOM.select(\"#caption\").events(\"click\").map(function(){\"none\"===get(mMcaptionDiv)?mMcaptionDiv.ret(\"block\"):mMcaptionDiv.ret(\"none\")}),at=e.DOM.select(\"#game\").events(\"click\").map(function(){\"none\"===get(mMgameDiv)?mMgameDiv.ret(\"block\"):mMgameDiv.ret(\"none\")}),it=e.DOM.select(\"#clear\").events(\"click\").map(()=>{gameMonad.clearPicked()}),st=(e.DOM.select(\"input#group\").events(\"keypress\").map(e=>{mM10.ret(e.target.value),pMgroup.ret(e.target.value),worker.postMessage([mM9.x,e.target.value])}),e.DOM.select(\"#primeNumbers\").events(\"keypress\").map(function(e){13===e.keyCode&&worker.postMessage([\"CE#$42\",primesMonad.s,e.target.value])})),ct=e.DOM.select(\".box\").events(\"click\").map(e=>{console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"In boxAction$ -- e is\",e),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");var t=parseInt(e.target.parentElement.id,10),n=taskMonad.s[1].slice(t,t+1)[0],r=n,o=n.split(\"<$>\");(o=o.filter(e=>\"\"!==e))[1]=\"false\"===o[1]?\"true\":\"false\";var a=o.join(\"<$>\");socket.send(`TT#$42,${pMgroup.x},${pMname.x},${t},${r},${a}`)}),ht=e.DOM.select(\".cbx2\").events(\"click\").map(e=>{console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"In cbxAction$ -- e is\",e),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\"),console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\");var t=parseInt(e.target.parentNode.id,10),n=taskMonad.s[1].slice(t,t+1)[0],r=n,o=n.split(\"<$>\");(o=o.filter(e=>\"\"!==e))[1]=\"false\"===o[1]?\"true\":\"false\";var a=o.join(\"<$>\");socket.send(`TT#$42,${pMgroup.x},${pMname.x},${t},${r},${a}`)}),lt=e.DOM.select(\"#deleteTask\").events(\"click\").map(function(e){var t=parseInt(e.target.parentNode.id,10),n=taskMonad.s[1].slice(t,t+1)[0];socket.send(`TX#$42,${pMgroup.x},${pMname.x},${t},${n}`)}),ut=e.DOM.select(\"#edit2\").events(\"keypress\").map(function(e){if(13===e.keyCode){var t=parseInt(e.target.parentElement.id,10),n=taskMonad.s[1][t],r=n.split(\"<$>\"),o=e.target.value.split(\",\").join(\"<<>>\");r.shift(),r.unshift(o);var a=r.join(\"<$>\");socket.send(`TE#$42,${pMgroup.x},${pMname.x},${t},${n},${a}`)}}),pt=e.DOM.select(\"input.newTask\").events(\"keydown\").map(function(e){if(13===e.keyCode){var t=e.target.value.split(\",\");if(t.length<2)return void mMalert.ret(\"You should enter responsible party then a comma then a task\");var n=t.shift(),r=t.shift(),o=t.join(\"<<>>\")+\"<$>false<$>\"+n+\"<$>\"+r;socket.send(`TA#$42,${pMgroup.x},${pMname.x},${o}<@>`)}});console.log(\"Getting close to calcStream@\");var dt=e.DOM.select(\"#chat2\").events(\"click\").map(()=>showChatDiv=\"none\"===showChatDiv?\"block\":\"none\"),mt=e.DOM.select(\"#todoButton\").events(\"click\").map(()=>showTodoDiv=\"none\"===showTodoDiv?\"block\":\"none\"),ft=e.DOM.select(\"#res8\").events(\"click\"),gt=e.DOM.select(\"#diffRender\").events(\"click\").map(()=>{diffRend<50?diffRend+=1:diffRend=0}),bt=e.DOM.select(\"input#change\").events(\"onChange\").map(e=>{console.log(\"diffRend changed <C><C>< Change ><C><C> --\\x3e --\\x3e e is\",e)}),vt=e.DOM.select(\"input#change\").events(\"click\").map(e=>{console.log(\"diffRend changed <C><C>< Click Click Click ><C><C> --\\x3e --\\x3e e is\",e)}),yt=ft.map(()=>{res8_Style=res8_HIDE,setTimeout(()=>{res8_Style=res8_SHOW,diffRender()},4200),RESULT_8=[],bind(1)(addP(2))(cubeC)(addC(3))(multC(2))(multP(3))(addC(30))(multC(.1))(terminate).slice(1,8).map(e=>e.then(e=>{RESULT_8.push(e.x+\" \"),console.log(RESULT_8),diffRender()}))});console.log(\"NOW WE ARE AT calcStream@\");var _t=e.DOM.select(\"input#test5\").events(\"keypress\").map(function(e){13===e.keyCode&&test5(e.target.value)}),Mt=e.DOM.select(\"input#test7\").events(\"keypress\").map(function(e){13===e.keyCode&&(runTestResult=runTest(toInt(e.target.value)))});return{DOM:xs.merge(threeAction$,twoAction$,ge,be,ue,pe,de,me,fe,J,G,q,H,U,V,rt,oneAction$,r,j,L,B,y,_,M,w,k,D,S,O,T,R,A,C,E,N,$,I,Ae,_t,Mt,bt,vt,ee,Le,K,Y,Ie,$e,gt,yt,u,o,ct,ht,l,Ve,W,Z,st,Pe,Fe,He,qe,ie,oe,ze,Ze,Ge,Ue,Ee,se,he,workerG$,workerH$,workerL$,workerM$,it,We,le,ce,ve,ae,X,Ye,ut,i,Se,ke,De,lt,a,pt,dt,at,mt,ot,c,Q,s,t,z,F).map(()=>h(\"div.main\",[h(\"div.image_3\",[h(\"img.image_2\",{props:{src:\"logo.svg\"}}),h(\"span\",\" \"),h(\"a\",{props:{href:\"https://cycle.js.org/\",target:\"_blank\"}},\"A Cycle.js application\")]),h(\"div\",{style:{textAlign:\"center\",fontWeight:\"bold\"}},[h(\"br\"),h(\"div\",{style:{fontSize:\"32px\",color:\"rgb(130,170,18\",textAlign:\"center\"}},\"THE ESSENCE OF FUNCTIONAL JAVASCRIPT\")]),h(\"br\"),h(\"div\",styleFunc([\"rgb(180,180,56)\",,\"23px\",\"italic\",,\"center\"]),\"Small, reusable functions\"),h(\"div\",styleFunc([\"rgb(180,180,56)\",,\"23px\",\"italic\",,\"center\"]),\"directed by program-specific functions\"),h(\"br\"),h(\"div.content\",[h(\"span.tao\",\"This project was created by and is actively maintained by David Schalk. The code repository is at \"),h(\"a\",{props:{href:\"https://github.com/dschalk/functional-javascript-game\",target:\"_blank\"}},\"functional-javascript-game\"),h(\"span\",\". Please leave a comment in the \"),h(\"a\",{props:{href:\"#comments\"}},\"comments\"),h(\"span\",\" section near the end of this page. You can email me at pyschalk@gmail.com. \"),h(\"h3\",\" The Game \"),h(\"p\",\" The demonstrations below include persistent, shared todo lists, text messaging, and a simulated dice game with a traversable history. All group members see other members' scores decrease or increase as they navigate backwards and forwards. \"),h(\"p\",' Visitors to this site are automatically logged in with pseudo-randomly generated numbers as their user names and passwords. The default \"group\" is the non-group \"solo\". '),h(\"p\",\" You can select a persistent name and password. These will make it possible for you to return at any time and delete or edit your comments. \"),h(\"p#gameIntro\",\" The demonstration section also has a text box where you can create or join a group by entering a group name. Changing groups resets your game score and goal tally to zeros. \"),h(\"span.tao\",\" The code is at \"),h(\"a\",{props:{href:\"http://github.com/dschalk/functional-javascript\",target:\"_blank\"}},\"Github\"),h(\"span\",\" and \"),h(\"a\",{props:{href:\"#gameCode\"}},\"here\"),h(\"br\"),h(\"h3\",\"The Rules\"),h(\"p\",'People who are in the same group, other than the default non-group named \"solo\", share the same todo list, chat messages, and simulated dice game. '),h(\"p\",\" Data for the traversable game history accumulates until a player scores three goals and wins. The data array is then emptied and the application is ready to start accumulating a new history. \"),h(\"p\",\" Your user name for trying out the game, todo list, and chat demonstrations and for leaving comments is a thirteen digit random number. In the game section and in the comments section near the bottom of this page, you can chose your own persistent user name and password. As mentioned above, Knowing your password facilitates revising or removing comments.\")]),h(\"h1\",\"Game, Todo List, Text Messages\"),h(\"div#gameDiv2\",{style:{display:mMgameDiv2.x}},[h(\"div#leftPanel\",{style:{display:mMgameDiv2.x}},[h(\"p\",\"RULES: If clicking two numbers and an operator (in any order) results in 20 or 18, the score increases by 1 or 3, respectively. If the score becomes 0 or is evenly divisible by 5, 5 points are added. A score of 25 results in one goal. That can only be achieved by arriving at a score of 20, which jumps the score to 25. Directly computing 25 results in a score of 30, and no goal. Each time ROLL is clicked, one point is deducted. Three goals wins the game. The code is in an appendix.\"),h(\"p\",{style:{color:\"red\",fontSize:\"20px\"}},mMgoals2.x),buttonNode,h(\"br\"),h(\"button#4.op\",\"add\"),h(\"button#5.op\",\"subtract\"),h(\"button#6.op\",\"mult\"),h(\"button#7.op\",\"div\"),h(\"button#8.op\",\"concat\"),h(\"br\"),h(\"br\"),h(\"div#dice\",{style:{display:mMdice.x}},[h(\"button#roll.tao1\",\"ROLL\"),h(\"button#back.tao100\",\"BACK\"),h(\"button#ahead.tao1\",\"FORWARD\"),h(\"div.tao\",`Selected numbers: ${gameMonad.fetch3().join(\", \")}`),h(\"div.tao\",`Operator: ${gameMonad.fetch2()} `),h(\"div.tao\",\"Index: \"+gameMonad.s[1]),h(\"p\",\" When traversing the game history, any time there are two selected numbers and a selected operator, a computation will be performed. You can clear the selected numbers and substitute others, and if you don't want a selected operator you can select another one.\"),h(\"p\",\" Create a group or join an existing group. If you registered a name below, press the <ENTER> key twice or hold it down for a second or two in order to display any group todo list that might exist. Group t might still have a todo list.\"),h(\"span\",\"Change group: \"),h(\"input#group\",\"test\"),h(\"p\",mMsoloAlert.x),h(\"p\",\" You can change your name by entering a comma-separated name and password below. The combination will go into a persistent file. You can use this combination in the future to edit or delete your saved comments. \"),h(\"span.red\",mMregister.x),h(\"p\",{style:{color:\"red\"}},nameMess),h(\"label\",{style:{display:mMshowRegister.x}},\"Register or log in here:\"),h(\"input.register\",{style:{display:mMshowRegister.x}})])]),h(\"div#rightanel\",{style:{display:\"block\",float:\"right\"}},[h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"button#todoButton.cow\",\"TOGGLE TODO_LIST\"),h(\"br\"),h(\"br\"),h(\"button#chat2.cow\",\"TOGGLE CHAT\"),h(\"br\"),h(\"br\"),h(\"br\"),h(\"div\",{style:{fontSize:\"14 px\"}},\"Name: \"+pMname.x),h(\"div\",{style:{fontSize:\"14 px\"}},\"Group: \"+pMgroup.x),h(\"br\"),h(\"div\",{style:{fontSize:\"14 px\"}},gameData),h(\"br\"),h(\"div#a100\",\" _____________________________________ \"),h(\"p.italic\",' Join group \"t\" if you want to see some previously created tasks. '),h(\"div\",{style:{display:showTodoDiv}},[h(\"div\",taskMonad.html),h(\"div\",\"Enter author, responsible person, and task here: \"),h(\"input.newTask\")]),h(\"br\"),h(\"span#alert\",mMalert.x),h(\"br\"),h(\"span#alert2\"),h(\"br\"),h(\"div#chatDiv\",{style:{display:showChatDiv}},[h(\"div#messages\",[h(\"span\",\"Message: \"),h(\"input.inputMessage\"),h(\"div\",messages),h(\"br\")])])])]),h(\"br\"),h(\"h1\",\"___________________________________________________________\"),h(\"div.content\",[h(\"div#bind\"),h(\"br\"),h(\"p\",\" The asynchronous functions in Demonstration 1 use monadItter instances mMZ40 and mMZ52 instead of Promises. Here's the definition of MonadItter: \"),h(\"pre\",\"  var MonadItter = function MonadItter() {\\n  this.p = function () {};\\n  this.release = function () {\\n    return this.p.apply(this, arguments);\\n  };\\n  this.bnd = function (func) {\\n    return this.p = func;\\n  };\\n}; \"),h(\"p\",\" MonadItter instances trap incoming WebSocket messages based on their six-digit prefixes and redirect them according to their intended purposes. No error checking is needed. If a prefix is not recognized, the message falls through and is disregarded. \"),h(\"h3\",\"Reactivity In Cycle.js\"),h(\"span.tao\",\" Reactivity occurs naturally in the Cycle.js framework. Many developers find that Cycle.js has an unusually steep learning curve. It isn't so bad if you start with Andrew Staltz' \"),h(\"a\",{props:{href:\"https://egghead.io/courses/cycle-js-fundamentals\",target:\"_blank\"}},\" Overview of Cycle.js.\"),h(\"span\",\" Its elegance might take your breath away. \"),h(\"br\"),h(\"br\"),h(\"a.tao\",{props:{href:\"https://github.com/snabbdom/snabbdom\"}},\" Snabbdom\"),h(\"span\",\", \"),h(\"a\",{props:{href:\"http://x-stream.github.io/\"}},\" xstream,\"),h(\"span\",\" and most of the monads and functions presented here are available in browser developer tools consoles and scratch pads. A production site would load these as modules, but this site is for experimentation and fun so many of its functions and variable definitions are included in scripts in the index.html page. \"),h(\"br\"),h(\"p\",\" The next interactive demonstration accepts user input and executes the following statement in a web worker: \"),h(\"pre\",\"bind(ar[1])(execF)(fpFunc(ar[0])(x)); \"),h(\"span\",\" The parameters are defined in the \"),h(\"a\",{props:{href:\"fp\"}},\"appendix\"),h(\"span\",\". \"),h(\"br\"),h(\"pre\",{style:{color:\"red\",fontStyle:\"italic\"}},\"Red Indicates An Ongoing Computation\"),h(\"pre\",\"Fibonacci numbers   Prime Numbers   Prime Fibonacci Numbers \"),h(\"span\",mMfibBlurb.x),h(\"span\",[h(\"svg\",{attrs:{width:50,height:50}},[h(\"circle\",{attrs:{cx:25,cy:25,r:20,stroke:\"purple\",\"stroke-width\":4,fill:fill1Monad.x}})])]),h(\"span\",mMprimeBlurb.x),h(\"span\",[h(\"svg\",{attrs:{width:50,height:50}},[h(\"circle\",{attrs:{cx:25,cy:25,r:20,stroke:\"purple\",\"stroke-width\":4,fill:fill2Monad.x}})])]),h(\"span\",mMprimeFibBlurb.x),h(\"span\",[h(\"svg\",{attrs:{width:50,height:50}},[h(\"circle\",{attrs:{cx:25,cy:25,r:20,stroke:\"purple\",\"stroke-width\":4,fill:fill3Monad.x}})])]),h(\"br\"),h(\"br\"),h(\"p.red\",\"The elapsed time is \"+mMelapsed.x+\" milliseconds.\"),h(\"input#fib92\"),h(\"br\"),h(\"br\"),h(\"span#PF_7.red6\",\"Fibonacci Numbers\"),h(\"br\"),h(\"span#PF_9.turk\",ne),h(\"br\"),h(\"span#PF_8.red6\",\"Prime Fibonacci Numbers\"),h(\"br\"),h(\"span#primeFibs.turk\",re),h(\"br\"),h(\"span#PF_21.red6\",\"The largest generated prime number.\"),h(\"br\"),h(\"span.turk\",te),h(\"br\"),h(\"h3\",\" Promises are not needed \"),h(\"p\",\" Asynchronous code can be handled without reliance on Ecmascript 2015 promises either explicitly or implicitly (e.g. using async/await). Cycle.js drivers eliminate any need to explicitly use functions from a reactive library, but xstream is an integral component of Cycle.js unless you choose most.js or RxJS. \"),h(\"p\",\" The second demonstration in this series decomposes numbers into its their prime factors. Testing with sequences of 9's, the first substantial lag occurs at 9,999,999 - unless a large array of prime numbers has already been generated in the previous demonstration or elsewhere. Here it is:\"),h(\"input#factors_1\"),h(\"br\"),h(\"br\"),h(\"span\",mMfactors.x),h(\"span.tao3\",mMfactors23.x),h(\"p\",\" primesMonad and the functions primarily involved in its transformation are shown below: \"),!function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}().primes,h(\"p\",\" primesMonad state updates are generated in workerB.js and stored in the main thread. Users set new upper bounds on the size of the largest Fibonacci number in the series to be considered by entering a number in a browser input box. Here is the relevant code: \"),!function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}().primes3,h(\"p\",\" The user's selected number along with the current state of primesMonad (primesMonad.s) gets posted to workerB, which gets functionality beyond its prototype from workerB.js, which orchestrates preparation of the return message that will be posted back to the main thread. workerB.js delegates the job to functions in script2.js by calling: \"),!function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}().primes4,h(\"p\",\" execF prepares the Fibonacci series and sends its state, along with the state of primesMonad that it received from workerB.js, to fpTransformer. execP is called with the current state and the largest Fibonacci number that had been recently produced by execF as arguments. The updated state is an array with four elements, [new upper bound, new series, largest prime produced in the current browser session, largest series]. If the new result is larger than any previous one, the first and second elements of the state array are identical to the third and fourth. Otherwise, they are smaller. As is apparent in the following code, primesMonad is re-created in the main thread using the state array that was posted by workerB. \"),!function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}().primes2,h(\"br\"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"h2\",\"MonadItter\"),h(\"p\",' As shown in the \"Monads\" section (above), the definition of MonadItter is: '),!function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}().monadItter,h(\"p\",\" MonadItter instances don't link to one another. They exist to facilitate the work of instances of Monad, MonadState, etc. Here's how they work: \"),h(\"p\",'For any instance of MonadItter, say \"it\", \"it.bnd(func)\" causes it.p === func. Calling the method \"it.release(...args)\" causes p(...args) to run, possibly with arguments supplied by the caller. '),h(\"p\",\" MonadItter instances control the routing of incoming WebSocket messages. In one of the demonstrations below, they behave much like ES2015 iterators.\"),h(\"h3\",\" A Basic Iterator \"),h(\"p\",\"The following example illustrates the use of release() with an argument. It also shows a lambda expressions being provided as an argument for the method mMZ1.bnd() (thereby becoming the value of mMZ1.p), and then mMZ1.release providing an arguments for the function mMZ1.p. The code is shown beneath the following two buttons. \"),h(\"button#testZ\",\"mMZ33.release(1)\"),h(\"p\",mMt33.x),h(\"span\",\"Refresh button: \"),h(\"button#testQ\",\"mMt33.ret(0) \"),h(\"span.tao\",\" The expression mMt33.x sits permanently in the Motorcycle virtual DOM description. You can call \"),h(\"span.green\",\"mMZ33.release(v)\"),h(\"span\",\" by entering a value for v below: \"),h(\"br\"),h(\"span\",\"Please enter an integer here: \"),h(\"input#testW\"),h(\"p\",' cube() is defined in the Monad section (above). If you click \"mMZ1.release(1)\" several times, the code (above) will run several times, each time with v === 1. The result, mMt3.x, is shown below the button. mMZ1.p (bnd()\\'s argument) remains constant while mMZ1.release(1) is repeatedly called, incrementing the number being cubed each time. '),h(\"p\",\" Here is another example. It demonstrates lambda expressions passing values to a remote location for use in a computation. If you enter three numbers consecutively below, call them a, b, and c, then the quadratic equation will be used to find solutions for a*x**2 + b*x + c = 0. The a, b, and c you select might not have a solution. If a and b are positive numbers, you are likely to see solutions if c is a negative number. For example, 12, 12, and -24 yields the solutions 1 and -2. \"),h(\"p#quad4.red2\",mMquad4.x),h(\"p#quad5.red2\",mMquad5.x),h(\"p#quad6.red2\",mMquad6.x),h(\"p\",\"Run mMZ3.release(v) three times for three numbers. The numbers are a, b, and c in ax*x + b*x + c = 0. Remember to press <ENTER> after each number. \"),h(\"input#quad\"),h(\"p\",' The function \"solve()\" is at the center of the algorithm. See how mMZ3.bind() appears three times. Each time a user enters a number, say \"x\", mMZ3.release(x) executes. After the third number, solve calls itself so the process can start again. I prefer this approach over ES6 generators. Here\\'s solve(): '),!function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}().quad,h(\"p\",\" And here are the supporting functions: \"),!function(){var e=new Error(\"Cannot find module './code.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}().quad2,h(\"p\",\" fmap (above) facilitated using qS4 in a monadic sequence. qS4 returns an array, not an instance of Monad, but fmap lifts qS4 into the monadic sequence. \"),h(\"p\",' The function solve() is recursive. It invokes itself after release() executes three times. The expression \"solve()\" resets solve to the top, where mMZ3.p becomes a function containing two nested occurrences of mMZ3.bnd. After mMZ3.release() executes, mMZ3.p becomes the function that is the argument to the next occurrence of mMZ3.bnd. That function contains yet another occurrence of mMZ3.bnd. MonadItter is syntactic sugar for nested callbacks. '),h(\"h3\",\" Preserve Archives By Avoiding Mutation \"),h(\"p\",' When you assign a variable to an array, for example \"var arr = [1,2,3]\", arr points to a location in memory. Suppose you want to preserve a record of previous values of arr. You can\\'t do it with an array such as b below: '),h(\"pre\",\"    var arr = [1,2,3];\\n    var c = arr;          \\n    var b = [arr];\\n    c.push(4);\\n    console.log(arr);   // [1,2,3,4]\\n    console.log(b[0]);  // [1,2,3,4] \"),h(\"p\",' That didn\\'t work because b[0] points to the same place in memory as arr and c. \"arr.push(4)\" mutated the value in arr\\'s location and \"b.push(arr)\" added a copy. \"b[0] == b[1]\" returning true verifies that both elements of b point to the same place in memory because in JavaScript, the \"==\" operator on objects (including arrays) is defined to return true if and only if the objects\\' '),h(\"p\",' Here is what happens when \"arr.slice()\" is pushed into b: '),h(\"pre\",\"  var arr = [1,2,3];\\n    var b = [arr.slice()];\\n    arr.push(4);\\n    b.push(arr.slice());\\n    console.log(b[0]);  // [1,2,3]\\n    console.log(b[1]);  // [1,2,3,4] \"),h(\"p\",' Success! \"arr.slice()\" returned a copy of arr assigned to a new location in memory. It is anonymous, so the only way to access it is through b. b[0], b[1], and arr each have unique locations in memory so mutating one has no effect on the others. '),h(\"p\",' The sixteen-square grid below puts these concepts into practice. If you click two squares, they exchange locations on the grid. If you do this several times, the \"BACK\" and \"FORWARD\" buttons will display the result of each pair of clicks. '),h(\"div#donkey\",g(f[mMindexDS.x])),h(\"br\"),h(\"button#gridBack\",\"back\"),h(\"button#gridForward\",\"forward\"),h(\"p\",\"index: \"+mMindexDS.x),h(\"p\",\"rNumsDS: \"+m.join(\", \")),h(\"p\",\"rMatrixF(rNumsDS: \"+p(m)),h(\"p\",' Reactivity is achieved in these demonstrations through Cycle.js rather than RxJS, Bacon, or something else that could work just as well, though perhaps not quite as elegantly. This section provides a glimpse of how I use (some might say, \"misuse\") Cycle.js. '),h(\"p\",' If you click any two numbers above they will exchange places with one another. The array \"rNumsDS\" keeps track of the positions of numbers on the grid. '),h(\"pre\",\"var rNumsDS = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] \"),h(\"p\",\" Each square on the grid is a button. This is the initial setup: \"),h(\"pre\",\"  var rDataDS = [\\n      h('button#mR0.mR', 0 ),\\n      h('button#mR1.mR', 1 ),\\n      h('button#mR2.mR', 2 ),\\n      h('button#mR3.mR', 3 ),\\n      h('button#mR4.mR', 4 ),\\n      h('button#mR5.mR', 5 ),\\n      h('button#mR6.mR', 6 ),\\n      h('button#mR7.mR', 7 ),\\n      h('button#mR8.mR', 8 ),\\n      h('button#mR9.mR', 9 ),\\n      h('button#mR10.mR', 10 ),\\n      h('button#mR11.mR', 11 ),\\n      h('button#mR12.mR', 12 ),\\n      h('button#mR13.mR', 13 ),\\n      h('button#mR14.mR', 14 ),\\n      h('button#mR15.mR', 15 ) ] \\n                \\n      var ArrDS = [\\n        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\\n      ];  \"),h(\"p\",\" The following line of code is a fixture of the virtual DOM. It accounts for the sixteen-square grid shown above: \"),h(\"pre\",\"  h('div#donkey', ArrDS[indexDS] ) \"),h(\"p\",\" If you begin exploring the demonstration by clicking the upper right square, this code in main() responds by placing the number 3 in rADS: \"),h(\"pre\",\"  var m83$ = sources.DOM\\n    .select('button#mR3').events('click')\\n    .map(e => {\\n      rADS.push(toInt(e.target.id.slice(2,4)));\\n      if (rADS.x.length === 2) {\\n       rDataDS = rExchange (rADS[0], rADS[1]); \\n      }\\n    }) \"),h(\"p\",' Then if you click the bottom right square (var m815), rADS expands to contain \"3\" and \"15\". This causes rExchange(3,15) to run and return the updated value of rDataDS. '),h(\"pre\",\"  function rExchange (k,n) {\\n      var a = rNumsDS[k];\\n      rNumsDS[k] = rNumsDS[n];\\n      rNumsDS[n] = a;\\n      rADS = [];\\n      return makeRDS(rNumsDS);\\n    } \"),h(\"p\",\" The last line of rExchange is a call to makeRDS, which is defined as follows: \"),h(\"pre\",\"  function makeRDS (arr) {\\n      var r = arr.slice();\\n      return [\\n        h('button#mR0.mR', r[0] ), \\n        h('button#mR1.mR', r[1] ),\\n        h('button#mR2.mR', r[2] ), \\n        h('button#mR3.mR', r[3] ), \\n        h('button#mR4.mR', r[4] ), \\n        h('button#mR5.mR', r[5] ),\\n        h('button#mR6.mR', r[6] ), \\n        h('button#mR7.mR', r[7] ), \\n        h('button#mR8.mR', r[8] ), \\n        h('button#mR9.mR', r[9] ),\\n        h('button#mR10.mR', r[10] ), \\n        h('button#mR11.mR', r[11] ), \\n        h('button#mR12.mR', r[12] ), \\n        h('button#mR13.mR', r[13] ),\\n        h('button#mR14.mR', r[14] ), \\n        h('button#mR15.mR', r[15] ) \\n      ];\\n    } \"),h(\"p\",' button#R9.mR has id \"#R9\" and formatting class \"mR\". When numbers are rearranged, the id\\'s remain in fixed positions. '),h(\"p\",\" The process is responsive because r83 and r815 are merged in the stream that feeds the virtual DOM; i.e., the stream returned by main() and fed back into main() by run(). Cycle.run(main, sources) is the last line of the front-end code. \"),h(\"p#proxies\",\" This code undoubtedly deviates from Cycle.js and functional programming recommended practices. After all, rNumsDS and rDataDS are global variables tracking the state of the grid. Cycle.js favors maintaining state in streams and functional aficionados eschew global variables, period. Me, I just like to make things work as neatly and efficiently as I can. Making a state stream would be a hassle and, since this is not a group effort, nobody is going to hijack my variable names. So, for now, grid state will hang out in global scope. \"),h(\"a\",{props:{href:\"#proxy2\"}},\"Back to the first demonstration\"),h(\"h2\",\"FUN WITH PROXIES\"),h(\"p\",' Proxies can be useful for debugging, type checking, error handling, and more. Where they really shine is in reactive programming. Modern Firefox and Chrome browsers have supported them for quite some time and it seems inevitable that we will see more and more of them in production code. In this Cycle.js application, the virtual DOM diff & render procedure is provided by MobX, which is beginning the switch to reliance on ES6 Proxies for reactivity. autoRefresh() uses a proxy in conjunction with MobX to update the DOM each time a function composed with Bind(true) and mBnd(true) executes (see Demonstrations 1 and 2). The following demonstration features an empty object that seems to contain an invisible key named \"attribute\" along with invisible methods for which \"attribute\" is a parameter.'),h(\"pre\",\"   var count = {}\\n\\nconsole.log(count.next);      // 1\\nconsole.log(count.next);      // 2\\nconsole.log(count.next);      // 3\\nconsole.log(count.next);      // 4\\nconsole.log(count.factorial); // 24 \"),h(\"p\",\" What? Isn't count.next supposed to return \\\"ReferenceError: next is not defined\\\"? What's going on here? \"),h(\"div\",{style:{fontSize:\"28px\",color:\"red\",textAlign:\"center\"}},proxyResult),h(\"br\"),h(\"button#pr1\",{style:{fontSize:\"18px\"}},\"count.next\"),h(\"button#pr2\",{style:{fontSize:\"18px\"}},\"count.previous\"),h(\"button#pr3\",{style:{fontSize:\"18px\"}},\"count.factorial\"),h(\"br\"),h(\"br\"),h(\"button#pr4\",{style:{fontSize:\"18px\"}},\"count.primes\"),h(\"button#pr5\",{style:{fontSize:\"18px\"}},\"count.ints\"),h(\"p\",\" The following code shows why count behaves as thought it had methods and an attribute: \"),h(\"pre\",'    function addOne () {this.attribute = this.attribute + 1}\\n    function takeOne () {this.attribute = this.attribute - 1}\\n\\n    function primeNums(n) {\\n      var store  = [], i, j, primes = [];\\n      for (i = 2; i <= n; ++i) {\\n        if (!store [i]) {\\n          primes.push(i);\\n          for (j = i << 1; j <= n; j += i) {\\n            store[j] = true;\\n          }\\n        }\\n      }\\n      return primes.join(\\'. \\');\\n    }\\n\\n\\n    function intArray (n) {\\n         return [...Array(n+1).keys()].join(\\', \\');\\n    }\\n\\n    var factorial = n =>\\n        n <= 1 ? n : n * factorial(n - 1);\\n\\n    var _state_ = {attribute: 0}\\n\\n    var handlerGet = {\\n        get: (a, b, c) => {\\n            if (b === \"next\") {addOne.apply(_state_); return _state_.attribute}\\n            else if (b === \"previous\") {takeOne.apply(_state_); return _state_.attribute}\\n            else if (b === \"factorial\") {return factorial(_state_.attribute)}\\n            else if (b === \"primes\") {return primeNums(_state_.attribute)}\\n            else if (b === \"ints\") {return intArray(_state_.attribute)}\\n        }\\n    }\\n\\n    count = new Proxy (count, handlerGet); '),h(\"br\"),h(\"span.tao\",' \"count\" is a proxy of itself. Trying to get a value from it invokes \"handlerGet\", overriding the default behavior (throwing a ReferenceError). NOTE: In order to avoid future name clashes and reduce siliness in production code, I changed the definition of count to: '),h(\"span\",{style:{color:\"#ee00bb\"}},'\"const count = new Proxy ({}, handlerGet);\"'),h(\"span\",'. Mutating \"count = {}\" into a proxy of itself was for demonstration purposes only. Both versions function alike. '),h(\"br\"),h(\"h3\",{style:{color:\"#bbee00\"}},\"Function Call Trap\"),h(\"p\",' The behavior of functions can be modified with the \"apply\" trap. While \"get: (a,b,c) =>\" in a handler is \"get: (target object, key, value) =>\", \"apply: (a,b,c) =>\" is \"apply: (target function, single argument, argument list) =>\" '),h(\"p\",' As initially defined, f17() does nothing more than this: f17(a,b,c,d) -> [a,c,b+c,d]. Re-defined as a proxy of itself, f17 generates arrays of Fibonacci numbers. The default values of b, c, and d are 0, 1, and false respectively, so f17(n) is equivalent to f17(n,0,1,false), returning the Fibonacci numbers under \"n\". f17(n,0,1,true) returns an array of prime Fibonacci numbers under n. Here\\'s the code: '),h(\"div\",{style:{color:\"#FFAABB\"}},\"f17(x): \"+F_17),h(\"br\"),h(\"div\",{style:{color:\"#ffaabb\"}},\"f17(x,0,1,true): \"+F_18),h(\"br\"),h(\"span\",'Enter a number \"x\" here: '),h(\"input#fibNum\"),h(\"div\",\" The floor of the absolute value will be used. \"),h(\"p\",\" Here's the code: \"),h(\"pre\",{style:{color:\"#00DDDD\"}},\"    function primeNums(n) {\\n      var store  = [], i, j, primes = [];\\n      for (i = 2; i <= n; ++i) {\\n        if (!store [i]) {\\n          primes.push(i);\\n          for (j = i << 1; j <= n; j += i) {\\n            store[j] = true;\\n          }\\n        }\\n      }\\n      return primes;\\n    }\\n\\n    function f17 (c, a=0, b=1, d=false) {return [c, b, a+b,d]};\\n\\n    var fibHandler = {\\n        apply: function(a, b, c) {\\n             var ax = a(...c)\\n             var arr = [0];\\n            while (ax[2] < ax[0]) { \\n                ax = a(...ax);\\n                arr.push(ax[1]);\\n            }\\n            if (c[3]) {\\n                var prms = primeNums(c[0]);\\n                var prmFibs = prms.filter(v => arr.includes(v));\\n                return `The prime Fibonacci numbers up to ${c[0]} are ${prmFibs.join(', ')}`;\\n            }    \\n            else return `The Fibonacci numbers up to ${ax[0]} are ${arr}`\\n        }\\n    }\\n\\n    f17 = new Proxy(f17, fibHandler)  \"),h(\"h3\",{style:{color:\"#bbee00\"}},\"Spreadsheet-like Behavior\"),h(\"p\",\" In spreadsheets, such as Microsoft's Excell, when a + b = c, changing a or b automatically changes c. Such behavior is easy to implement with proxies. \"),h(\"table\",{style:{color:\"#ffaa00\",fontSize:\"22px\"}},[h(\"tr\",[h(\"td\",\"A\"),h(\"td\",_state.a)]),h(\"tr\",[h(\"td\",\"B\"),h(\"td\",_state.b)]),h(\"tr\",[h(\"td\",\"SUM\"),h(\"td\",_state.sum)]),h(\"tr\",[h(\"td\",{style:{paddingRight:\"23px\"}},\"PRODUCT     \"),h(\"td\",_state.prod)])]),h(\"br\"),h(\"br\"),h(\"button#aplus\",{style:{fontSize:\"17px\"}},\" A + \"),h(\"button#aminus\",{style:{fontSize:\"17px\"}},\" A - \"),h(\"button#bplus\",{style:{fontSize:\"17px\"}},\" B + \"),h(\"button#bminus\",{style:{fontSize:\"17px\"}},\" B - \"),h(\"br\"),h(\"br\"),h(\"button#resetState\",{style:{fontSize:\"17px\"}},\" Reset \"),h(\"span\",{style:{paddingLeft:\"20px\"}},\"A :\"),h(\"input#stateA\"),h(\"span\",{style:{paddingLeft:\"20px\"}},\"B :\"),h(\"input#stateB\"),h(\"br\"),h(\"p\",\" Here's the code: \"),h(\"pre\",'  const _state = {a: 0, b: 0, sum: 0, prod: 0 }\\n\\n  function add_a () {this.a += 1}\\n  function subtract_a () {this.a -= 1}\\n\\n  function add_b () {this.b += 1}\\n  function subtract_b () {this.b -= 1}\\n\\n  function set_a (x) {this.a = x};\\n  function set_b (z) {this.b = z};\\n\\n  function sum () {this.sum = this.a + this.b}\\n  function prod () {this.prod = this.a * this.b}\\n\\n  function resetState () {this.a=0;this.b=0;this.sum=0;this.prod=0};\\n\\n  var handlerUpdate = {\\n      get: (a, b, c) => {\\n          if (b === \"add_a\") add_a.apply(_state)\\n          else if (b === \"add_b\") add_b.apply(_state)\\n          else if (b === \"subtract_a\") subtract_a.apply(_state)\\n          else if (b === \"subtract_b\") subtract_b.apply(_state)\\n          else if (b === \"resetState\") resetState.apply(_state)\\n          else if (b === \"resetState\") resetState.apply(_state)\\n          sum.apply(_state);  \\n          prod.apply(_state);\\n          diffRender();\\n      }\\n  }\\n\\n  const _count = new Proxy ({}, handlerUpdate); '),h(\"p\",\" \"),h(\"a\",{props:{href:\"#proxy2\"}},\"Back to the first demonstration\"),h(\"h2\",\" MonadEr - An Error-Catching Monad \"),h(\"p\",' THIS IS A FIRST STAB AT MAKING SOMETHING THAT PERFORMS LIKE HASKELL\\'S \"Maybe\" MONAD. THERE IS LOTS OF ROOM FOR IMPROVEMENT.  '),h(\"p\",\" Instances of MonadEr function much the same as instances of Monad, but when an instance of MonadEr encounters an error, it ceases to perform any further computations. Instead, it passes through every subsequent stage of a sequence of MonadEr expressions, reporting where it is and repeating the error message. It will continue to do this until it is re-instantiated or until its bnd() method runs on the function clean(). \"),h(\"p\",\"Functions used as arguments to the MonadEr bnd() method can be placed in quotation marks to prevent the browser engine from throwing reference errors. Arguments can be protected in the same manner. Using MonadEr can prevent the silent proliferation of NaN results in math computations, and can prevent browser crashes due to attempts to evaluate undefined variables. \"),h(\"p.tao1b\",\" The monad laws hold for MonadEr instances. The following relationships were verified in the Chrome console: \"),h(\"pre\",\"    ret3(0,'t',[])  // t is now an instance of MonadEr with t.x = 0 and t.e = [].\\n\\n        t.ret(3).bnd(cube3).x === cube(3).x\\n        ret3(3).bnd(cube3).x === cube3(3).x\\n\\n        t.bnd(t.ret) === t\\n        t.bnd(ret) === t\\n\\n        t.ret(0).bnd(add3, 3).bnd(cube3).x ===\\n        t.ret(0).bnd(v => add3(v,3).bnd(cube3)).x  \"),h(\"span#comments\"),h(\"br\"),h(\"div#comment\"),h(\"h2\",{style:{color:\"red\"}},\"Comments\"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"div#com2\",{style:{display:\"inline\"}}),h(\"h3\",\"User Names\"),h(\"p\",\" When this page loads in the browser, a user name is automatically generated in order to establish a unique WebSocket connection. This makes it possible to exchange text messages with other group members, play the game, and work on a shared todo list. If you want to leave a comment, you need to log in with a user name and a password of your choice. Each can be a single character or you could use a hard-to-hack combination of alphabet letter, numbers, and special characters. The main requirement is that there be only one comma, and that it be placed between the name and the password. \"),h(\"p\",\"The server will keep your user name and password in a text file. If you use your saved user name and password sometime in the future, you will be able to edit or delete any comments you previously made. \"),h(\"p\",\" If you enter a user name that has not been recorded, you will be logged in as that user. The user name and password will be saved. This means that you do not need to first register and then log in. This is an all-in-one process. If you enter a recognized user name but the password does not match the password in the record, you will be asked to try again. \"),h(\"br\"),h(\"h3\",\"Register\"),h(\"span.red\",mMregister.x),h(\"input.register\",{style:{display:mMshowRegister.x}}),h(\"br\"),h(\"br\"),h(\"h3\",\"COMMENTS - One paragraph at a time.\"),h(\"textarea#comment\",{style:{width:\"60%\",height:\"90px\"}},\"\"),h(\"br\"),h(\"br\"),h(\"div\",commentMonad.html),h(\"p\",\" When this website loads, it receives from the server a string containing all of the comments. The string is saved in commentMonad.s[0]. The string is transformed into an array of comments which is saved in commentMonad.s]1]. \"),h(\"p\",\" When a comment is created, modified, or deleted, a WebSocket message goes to the server which performs some of its own housekeeping and broadcasts a message to all online browsers. It is received in messages$ and forwarded comments.js. \"),h(\"p\",\" The functions in the comments.js file mutate commentsMonad. There is no reason to create fresh instances of commentMonad, other than out of devout devotion to the doctrine of non-mutation. How silly that would be! Nothing touches commentMonad outside of the comments.js file; there is no danger. \"),h(\"p\",\" commentMonad stands in stark contrast to the gameMonad, which is never mutated although it sees much action during game play. Immutability is necessary for game history traversal. Here is the entire Comments.js file: \"),h(\"pre\",\"function showFunc (name, name2)\\n  {return name == name2 ? 'inline-block' : 'none'}\\n\\n  var MonadState3 = function MonadState3(g, state) {\\n    this.id = g;\\n    this.s = state;\\n    this.bnd = (func, ...args) => func(this.s, ...args);\\n    this.ret = function (a) {\\n      return window[this.id] = new MonadState(this.id, a);\\n    };\\n  }  \\n\\n  bind2(n)(cubeP)(addP(3))(a=>a+ar[0]+ar[1]-18)(multP(1/3))\\n    (addP(-11))(()=>ar[1]+ar[2]+ar[3])(terminate) ;\\n\\n  var commentMonad = new MonadState3('commentMonad',   [ '', [] ]);\\n\\n  MonadState3.prototype.html = [];\\n\\n  MonadState3.prototype.init = function (str) { // fetch all comments\\n    this.s[0] = str;\\n    this.s[1] = this.s[0].split(\\\"<@>\\\");\\n    this.s[1] = this.s[1].filter(v => (v != \\\"\\\"));\\n    process(this.s[1]);\\n  }\\n\\n  MonadState3.prototype.append = function (str) {\\n    this.s[0] = this.s[0] + str;\\n    this.s[1] = this.s[0].split('<@>').filter(v => (v != \\\"\\\"));\\n    process(this.s[1]);\\n  }\\n\\n  MonadState3.prototype.edit = function (num,txt) {\\n    this.s[1].splice(num,1,txt);\\n    this.s[0] = this.s[1].join(\\\"<@>\\\");\\n    this.s[1] = this.s[0].split('<@>').filter(v => (v != \\\"\\\"));\\n    process(this.s[1]);\\n  };\\n\\n  MonadState3.prototype.remove = function (num) {\\n    this.s[1] = this.s[1].filter(v => v!== '');\\n    this.s[1].splice(num,1);\\n    this.s[0] = this.s[1].join(\\\"<@>\\\");\\n    this.html = process(this.s[1]);\\n    return this.html;\\n  };\\n\\n  function process (a) { //Assembles the HTML for display.\\n    var arr = a;\\n    mMcomments.ret([]);\\n    var n = -1;\\n    arr.map(a => {\\n      var x = a.split(\\\"<o>\\\");\\n      if (x.length != 2) x = ['malfunction', '8888']\\n      x[1] = x[1].replace(/<<>>/g, ',');\\n      show = showFunc(x[0], pMname.x);\\n      n+=1;\\n      mMcomments.bnd(push, h('div#'+n, [\\n        h('span', x[0] + ' commented: ' + x[1].replace(/<<>>/g, \\\",\\\")),\\n        h('br'),\\n        h('textarea#commit', {props: {cols: 55, rows: 2},\\n           style: {display: show }}, x[1]),\\n        h('button#deleteB', {props: {innerHTML: 'delete'},\\n       style: {display: show, fontSize:14}}),\\n        h('br' ),\\n        h('span', '***************************************************************')\\n      ]))\\n    })\\n  } \"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"p\",\" *************************************************************************************** \"),h(\"span.tao\",\" The \"),h(\"a\",{props:{href:\"https://wiki.haskell.org/Monad_laws\",target:\"_blank\"}},\"Haskell Monad Laws\"),h(\"span\",\", which aren't even mandetory in Haskell, are common sense requirements for robust function composition. If you rely on functions to make programs work, you aren't communicating changes of state by mutating global variables. Time travel and undo algorithms naturally use immutable data. Thousands of passes through loops inside the scopes of functions cry out for mutable values, not factories spewing pointers and values into memory. When you program functionally, Things fall into place without enforcing rules. This is doing through inaction, in the spirit of the \"),h(\"a\",{props:{href:\"https://en.wikipedia.org/wiki/Tao_Te_Ching\",target:\"_blank\"}},\"Tao Te Ching\"),h(\"br\"),h(\"br\"),h(\"span.tao\",\" The \"),h(\"a\",{props:{href:\"https://github.com/fantasyland/fantasy-land\",target:\"_blank\"}},\"Fantasyland\"),h(\"span\",\" algebraic javascript specification is an admirable achievement. People who are familiar with Haskell can jump right in and start coding with familiar monads and functors borrowed from the Haskell \"),h(\"a\",{props:{href:\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html\",target:\"_blank\"}},\"Prelude module\"),h(\"span\",\". The \"),h(\"a\",{props:{href:\"https://github.com/origamitower/folktale\",target:\"_blank\"}},\"Folktale\"),h(\"span\",' library also succeeds in reflecting the Haskell Prelude module. The Folktale \"Maybe\" monad is being evaluated on this page as a way to catch errors. '),h(\"br\"),h(\"pre\",\"  var rNumsDS = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] \"),h(\"p\",\" feels elegant to me. It is a simple proxy for the sixteen square grid that never needs to be operated upon directly because the placement of its numbers are in one-to-one correspondence with the placement of its (rNumsDS's) elements. I could have tucked it away in an object or closure, but I like it so much that I dignified it with the designation \\\"window.rNumsDS\\\". I ignored an important rule. I did it more than once, and it isn't the only important rule I ignored. But in every case, there was an advantage (if only in efficiency), and I made sure that no harm could come from my deviations. \"),h(\"p\",\" If I were working in a group, or providing something that would be maintained by anyone other than me, I would code by the book. I'm not getting paid for this work; I'm just having fun. Dig it! \"),h(\"h3\",\"Haskell Time\"),h(\"p\",\" This page is for front end developers, but in case anyone is interested, here are the server functions responsible for deleting or amending a comment: \"),h(\"pre\",\"    removeOne _ []                 = []\\n    removeOne x (y:ys) | x == y    = ys\\n                       | otherwise = y : removeOne x ys\\n\\n    changeOne :: Text -> Text -> [Text] -> [Text]\\n    changeOne _ _ []                 = []\\n    changeOne z x (y:ys) | x == y    = z : ys\\n                         | otherwise = y : changeOne z x ys \"),h(\"a\",\" Every message sent to the server is a comma separated string beginning with a prefix, then a group, and then a name. Comma separated items after that are named extra and extra2. \"),h(\"p\",\" The code belw is responsible for dealing with comments. As in the browser, WebSocket messages are dealt with according to their six character prefixes. extra and extra2 are the only pertinent data since comments go to all groups \"),h(\"pre\",'else if \"GZ#$42\" `T.isPrefixOf` msg\\n                    -- FETCH AND BROADCAST ALL COMMENTS ON BROWSER LOAD\\n     then\\n         do\\n             st <- atomically $ readTVar state\\n             broadcast (\"GZ#$42,\" `mappend` group `mappend` \",\"\\n               `mappend` sender `mappend` \",\" `mappend` comments ) st\\n\\n  else if \"GN#$42\" `T.isPrefixOf` msg\\n                    -- RECEIVE A NEW COMMENT, UPDATE THE FILE AND THE TVAR,\\n                    --  AND BROADCAST THE NEW COMMENT\\n     then\\n         do\\n             old <- atomically $ readTVar comms\\n             lk <- atomically L.new\\n             let c = old `mappend` (T.replace (at `mappend` at) at extra)\\n             let new = T.replace (at `mappend` at) at c -- cleanup\\n             L.with lk $ TIO.writeFile xcomments new -- lock on writing\\n             atomically $ writeTVar comms new\\n             st <- atomically $ readTVar state\\n             broadcast (\"GN#$42,\" `mappend` group `mappend` \",\"\\n                 `mappend` sender `mappend` \",\" `mappend` extra) st\\n\\n   else if \"GD#$42\" `T.isPrefixOf` msg      -- DELETE A COMMENT\\n      then\\n          do\\n              a <- TIO.readFile xcomments\\n              lk <- atomically L.new\\n              let b = T.splitOn at a\\n              let c = removeOne extra2 b\\n              let d = T.intercalate at c\\n              L.with lk $ TIO.writeFile xcomments d\\n              atomically $ writeTVar comms d\\n              st <- atomically $ readTVar state\\n              broadcast (\"GD#$42,\" `mappend` group `mappend` \",\"\\n                `mappend` sender `mappend` \",\" `mappend` extra) st\\n\\n   else if \"GE#$42\" `T.isPrefixOf` msg      -- EDIT A COMMENT\\n      then\\n          do\\n              a <- TIO.readFile xcomments\\n              lk <- atomically L.new\\n              let b = T.splitOn at a\\n              let c = changeOne extra3 extra2 b\\n              let txt = T.intercalate at c\\n              L.with lk $ TIO.writeFile xcomments txt\\n              atomically $ writeTVar comms txt\\n              st <- atomically $ readTVar state\\n              broadcast (\"GE#$42,\" `mappend` group `mappend` com\\n                `mappend` sender `mappend` com `mappend` extra `mappend` com\\n                   `mappend` extra3) st   '),h(\"div#gameCode\",\" \"),h(\"h2\",\"Appendix A - The Game Code\"),h(\"pre\",\"function MonadState(g, state) {\\n    this.id = g;\\n    this.s = state;\\n  };  \"),h(\"a\",{props:{href:\"#gameIntro\"}},\"Back to the rules\"),h(\"p\"),h(\"pre\",\"MonadState.prototype.run = function ([\\n    score = this.s[0][this.s[1]][0],\\n    goals = this.s[0][this.s[1]][1],\\n    operator = this.s[0][this.s[1]][2],\\n    picked = this.s[0][this.s[1]][3].slice(),\\n    display = this.s[0][this.s[1]][4].slice()\\n    playerName = this.s[0][this.s[1]][5] ? this.s[0][this.s[1]][5].slice() : \\\"nobody\\\",\\n    playerGroup = this.s[0][this.s[1]][6] ? this.s[0][this.s[1]][6].slice() : \\\"solo\\\",\\n  ]) {\\n    this.s[1] += 1;\\n    var newState = this.s.slice();\\n    newState[0].splice(this.s[1], 0, [score, goals, operator, picked, display,playerName,playerGroup])\\n     console.log(\\\"[score, goals, operator, picked, display]\\\",\\n       [score, goals, operator, picked, display,playerName,playerGroup]);\\n    this.s = newState;\\n    buttonNode = bNode(display);\\n    return window['gameMonad'] = new MonadState('gameMonad', newState);\\n  }\\n\\n  var gameMonad = new MonadState('gameMonad', [[[0,0,0,[],[1,2,3,4]],\\n        [0,0,0,[],[0,0,0,0]]],1 ]);  \"),h(\"p\",\" Here is the code that controls what happens when a player clicks a number or an operator: \"),h(\"pre\",\"  var numClickAction$ = numClick$.map(e => {\\n      if (gameMonad.fetch3().length < 2)  {\\n        var a = gameMonad.fetch3();\\n        var b = gameMonad.fetch4();\\n        a.push(b.splice(e.target.id, 1)[0]);\\n        gameMonad.run([,,,a,b,,]);\\n        if (a.length === 2 && gameMonad.fetch2() != 0) {\\n          updateCalc(a, gameMonad.fetch2())\\n        }\\n      }\\n    }).startWith([0, 0, 0, 0]);\\n\\n    var opClick$ = sources.DOM\\n        .select('.op').events('click');\\n\\n    var opClickAction$ = opClick$.map(e => {\\n      var s3 = gameMonad.fetch3();\\n      if (s3.length === 2) {\\n        updateCalc(s3, e.target.innerHTML);\\n      }\\n      else {\\n        gameMonad.run([,,e.target.innerHTML,,,,]);\\n      }\\n    });  \"),h(\"p\",\" Notice the empty spaces in the arguments to gameMonad.run(). gameMonad.run()'s argument is an array to facilitate calling it with default values. In numClickAction$ we are not changing the score, goals, or operator. The default values of these parameters are their current values. In opClickAction$, we are changing only one thing, the operator. Everything else stays as it is. \"),h(\"p\",\" When two numbers and an operator have been selected, control passes to updateCalc(). Here's the code: \"),h(\"pre\",`function updateCalc(ar, op) {\\n    var result = calc(ar[0], op, ar[1]);ar\\n    if (result === 18 || result === 20) {\\n      score(result);\\n    }\\n    else {\\n      var a = gameMonad.fetch4().slice();\\n      a.push(result);\\n      gameMonad.run([,,0,[],a,,]);  // Display the result and\\n                                  // reset the operator and selected values.\\n    }\\n  };\\n\\n  function score(result) {\\n      var sc = parseInt(gameMonad.fetch0());\\n      var sco = result === 18 ? sc + 3 : sc + 1;\\n      var scor = sco % 5 === 0 ? sco + 5 : sco;\\n      var goals = gameMonad.fetch1();\\n      if (scor === 25 && gameMonad.fetch1() === \"2\") {  // The player wins.\\n          mMindex.ret(0);\\n          gameMonad = new MonadState('gameMonad',\\n             [[[0,0,0,[],[0,0,0,0]],[0,0,0,[][0,0,0,0]]],0]);\\n          socket.send(\\`CE#$42,${pMgroup.x},${pMname.x}\\`);\\n          // Ask the server to announce the winner to the entire group\\n          newRoll(0,0);\\n      }\\n      else if (scor === 25) {\\n        newRoll(0, parseInt(goals,10) + 1);\\n      }\\n      else newRoll(scor, goals);   // No increase in the number of goals.\\n  };   `),h(\"span.tao\",\" Additional code is available at\"),h(\"a\",{props:{href:\"https://github.com/dschalk/monads-in-JavaScript\",target:\"_blank\"}},\"monads-in-JavaScript.\"),h(\"p\",\".\"),h(\"p\"),h(\"h3\",\"Appendix B - Curried Functions Used In Several Demonstrations\"),h(\"pre#wait\",\"    const divCinverse = a => b => ret(e/b);\\n    const divC = a => b => ret(b/a);\\n    const addC = a => b => ret(a+b);\\n    const cubeC = v => ret(v*v*v);\\n    const multC = a => b => ret(a*b);\\n    const doubleC = a => ret(a+a);\\n    const squareC = a => ret(a*a);\\n    const sqrtC = a => ret(Math.sqrt(a));\\n\\n  function wait(ms) {\\n    return new Promise(r => setTimeout(r, ms));\\n  } h('a#it4', {props: {href: '#top'}}, 'Back to the top'),\\n\\n  async function cubeP (x) {\\n    await wait(2000)\\n    return ret(x*x*x);\\n  } \\n\\n  const addP = x => async y => {\\n    await wait(2000)\\n    return ret(x + y);\\n  }\\n\\n  async function squareP (x) {\\n    await wait(2000)\\n    return ret(x*x);\\n  }\\n\\n  const divPinverse = a => async b => {\\n    await wait (2000)\\n    return ret(a/b);\\n  }\\n\\n  const divP = a => async b => {\\n    await wait (2000)\\n    return ret(b/a);\\n  }\\n\\n  const sqrtP = async a => {\\n    await wait (2000)\\n    return ret(Math.sqrt(a));\\n  }\\n\\n  const doubleP = async a => {\\n    await wait (2000)\\n    return ret(a+a);\\n  }\\n\\n  const multP = x => async y => {\\n    await wait(2000)\\n    return ret(x * y);\\n  }\\n\\n      \"),h(\"p\"),h(\"h3\",\"Appendix C - Further Reading \"),h(\"p\",\" Here is a good resource: \"),h(\"a\",{props:{href:\"https://github.com/getify/You-Dont-Know-JS\",target:\"_blank\"}},\"You Don't Know JavaScript by Kyle Simpson\"),h(\"span\",\" You can support the open-source digital version of this book with Patreon at the above address or purchase hard copies from OReily, Amazon, etc. \"),h(\"a\",{props:{href:\"https://github.com/getify/You-Dont-Know-JS\",target:\"_blank\"}},\"You Don't Know JavaScript\"),h(\"span\",\" is the thinking developer's answer to \"),h(\"a\",{props:{href:\"http://shop.oreilly.com/product/9780596517748.do\",target:\"_blank\"}},' \"JavaScript: The Good Parts\" by Douglas Crockford '),h(\"p\",\" That's not to say that Crockford isn't a thinking developer. He is a very bright guy. It's just that the so called \\\"good parts\\\" are a dumbed down subset of JavaScript that help keep people out of trouble when they don't feel inclined understand the JavaScript programming language. \"),h(\"span#cyclet\",', which has long been revered as a \"must read\" JavaScript book. Kyle Simpson recommends learning to use potentially dangerous code intelligently while Douglas Crockford advocates never using it at all. I think the phrase \"eval is evil\" stems from Crockford\\'s book. I find eval() to be very useful from time to time. Kyle Simpson teaches programmers how to safely tap the full potential of JavaScript. '),h(\"br\"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"h3\",\"MonadItter\"),h(\"p\",\" The MonadItter section of the page has a detailed discussion and live demonstrations. This is the definition: \"),h(\"pre\",\"  var MonadItter = function MonadItter() {\\n    this.p = function () {};\\n    this.release = function () {\\n      return this.p.apply(this, arguments);\\n    };\\n    this.bnd = function (func) {\\n      return this.p = func;\\n    };\\n  }; \"),h(\"h3\",\"Promises\"),h(\"p\",\" As the definition of MonadItter shows, bnd() saves functions until release() causes them to execute. MonadItter instances are usually used on this webpage where promises, generators, and async/await could also do the job. No transpiling is needed in old browsers; MonadItter is written in ES5. \"),h(\"p\",\"Here are the Promises-based functions prm4() and prm6() that can be substituted for it4() and it6() in the expression bind(145)(cubeC)(it4)(it6): \"),h(\"pre\",\"  const prm4 = x => {\\n    if (socket.readyState === 1) socket.send('BB#$42,pMgroup,pMname,' + x);\\n    return new Promise( (resolve, reject) => {\\n       mMZ37.bnd((y) => resolve(ret(y)))\\n    })\\n  }\\n\\n  const prm6 = x => {\\n    workerG.postMessage([primesMonad.s, [x]]);\\n    return \\\"Done\\\"\\n  } \"),h(\"p\",\" Error handling is easy when using MonadItter instances, and is entirely optional. \"),h(\"p\",' After \"bind(145)(cubeC)(it4)(it6)(it7) runs, the prime decomposition of the number it recieved arrives from workerG. The workerGDriver (sources.WWG) detects the message and adds it to the workerG$ stream. Here is the definition of workerGDriver:  '),h(\"pre\",\"  function workerGDriver () {\\n    return xs.create({\\n      start: listener => { workerG.onmessage = msg => listener.next(msg)},\\n      stop: () => { workerG.terminate() }\\n    });\\n  }; \"),h(\"p\",' Clicking the \"decompose fifteen random numbers\" button causes factorsRecursion(0) to execute. Here\\'s the code: '),h(\"pre\",blue,\"  const factorsRecursion = n => bind(145)(cubeC)(it4)\\n    (it6)(() => { if (n < 15) factorsRecursion(n+1)}); \"),h(\"p\",\"result778(m.data) is called each time a message from workerG arrives. The definition of result778 is:   \"),h(\"pre#defs\",blue,\"var result778 = x => h('div', [\\n      m778_RESULT,\\n      h('br'),\\n      h('span', bigBlue, x[3] ),\\n      h('span', bigGreen, x[0] ),\\n      h('span', bigBlue, x[4] ),\\n      h('span', bigRed, x[5] ),\\n  ]); \"),h(\"a\",{props:{href:\"#demo2\"}},\"Go to Demonstration 1\"),h(\"p\",' This is how Cycle.js handles click events in Demonstrations \"1\" and \"3\": '),h(\"pre\",\"  var factorsClick8$ = sources.DOM\\n    .select('button#factors_R').events('click'); \\n\\n  var factorsAction8$ = factorsClick8$.map(e => {\\n    var i = 0;\\n    m43_ = [];\\n    var bind = new Bnd3().run; \\n    while (i < 25) {\\n      bind(145)(x => x ** 3)(it4_b)(it6_b)(it7_b)();\\n      i += 1;\\n    }\\n  });  \"),h(\"p\",\" After 145 is cubed, it4 (Demonstration 1) and it4_b (Demonstration 2) request a pseudo-random numbers as follows: \"),h(\"pre\",`  var it4 = x => {\\n    if (socket.readyState === 1) socket.send(\\`BC#$42,${pMgroup.x},${pMname.x},${x}\\`);\\n  }\\n   \\n  var it4_b = x => {\\n    if (socket.readyState === 1) socket.send(\\`BD#$42,${pMgroup.x},${pMname.x},${x}\\`);\\n  } `),h(\"p\",\" The server complies by generating a pseudo-random number, \\\"z\\\", and broadcasts it to all members of the requestor's group. Users can join or create groups in the game section. Here's the server code: \"),h(\"pre\",'  else if \"BC#$42\" `T.isPrefixOf` msg     -- Generate a random number          \\n     then                                          \\n         do\\n             print \"extraNum:\"\\n             print extraNum\\n             z <- Fm.rM extraNum \\n             print z\\n             st <- atomically $ readTVar state\\n             broadcast (\"BC#$42,\" `mappend` group `mappend` \",\" \\n               `mappend` sender `mappend` \",\" `mappend` (pack $ show z) ) st\\n\\n  else if \"BD#$42\" `T.isPrefixOf` msg     -- Generate a random number          \\n     then                                          \\n         do\\n             print \"extraNum:\"\\n             print extraNum\\n             z <- Fm.rM extraNum \\n             print z\\n             st <- atomically $ readTVar state\\n             broadcast (\"BD#$42,\" `mappend` group `mappend` \",\" \\n               `mappend` sender `mappend` \",\" `mappend` (pack $ show z) ) st '),h(\"p\",' The Cycle.js front end recieves the WebSocket message, triggering the release of mMZ29 (Demonstration 1) or mMZ29 (Demonstration 3). The \"mMZ\" prefix is reserved for instances of MonadItter. Here the code that was waiting to be released. '),h(\"pre\",\"  mMZ28.bnd( () => {\\n    if (playerName === sender) mMZ40.release(v[3]);\\n    else console.log('message from sender to BC#$42')\\n  });\\n\\n  mMZ29.bnd( () => {\\n    if (playerName === sender) mMZ41.release(v[3]);\\n    else console.log('message from sender to BD#$42')\\n  }); \"),h(\"p\",' \"v(3)\" is the random munber recieved from the server. It is given to mMZ40 or mMZ41 when they are released. Here are it6 and it6_b, which contain the the code that is released: '),h(\"pre\",\"  var it6 = y => {\\n    mMZ40.bnd(y => workerH.postMessage([primeState, y]));\\n  }\\n\\n  var it6_b = y => {\\n    mMZ41.bnd(y => workerM.postMessage([primeState, y]));\\n  } \"),h(\"p\",\" The message posted to workerH (Demonstration 1) or workerM (Demonstration 3) contains all previously generated prime numbers along with y, the randomly generated number obtained from the server. \"),h(\"p\",\" When a user clicks the Demonstration 1 button, the event is handled in this Cycle.js application as follows: \"),h(\"pre\",bigGold,\"  var factorsClick8$ = sources.DOM\\n        .select('button#factors_R').events('click');\\n\\n            \\n    const factorsAction8$ = factorsClick8$.map(e => {\\n        var i = 0;\\n        m43_ = [];  // Clears the display\\n        var bind = new Bnd3();   //bi.run();\\n        while (i < 25 {\\n          bind(145)(x => x ** 3)(it4_b)(it6_b)(it7_b)();\\n          i += 1;\\n        }\\n    }); \"),h(\"br\"),h(\"a\",{props:{href:\"#top\"}},\"Go to the top\"),h(\"p#pingmaker\",\" \"),h(\"a\",{props:{href:\"#backToDem2\"}},\"Back to Mars\"),h(\"br\"),h(\"br\"),h(\"pre\",\"function Monad2(z) {\\n  this.x = z;\\n};\\n\\nfunction ret (v) {\\n  return new Monad2(v);\\n}\\n\\nvar id = x => ret(x[0], x[1]);\\nvar cube = x => ret([x[0]*x[0]*x[0], x[1].concat(x[0]*x[0]*x[0])]);\\nvar square = x => ret([x[0]*x[0], x[1].concat(x[0]*x[0])]);\\nvar add = a => b => ret([a+b[0], b[1].concat(a+b[0])]);\\n\\noperator >>= left 11 = (left, right) => {\\n  return #`${right}(${left}.x)`;\\n};\\n\\nvar a = (ret([3, []]) >>= cube >>= add(3) >>= square).x[1].reduce( (a,b) => a+b );\\n\\nvar b = ( ret([0, []]) >>= add(3) >>= cube >>= \\n(x => add(x[1][1])([x[1][1],x[1]])) >>=\\n(x => add(x[0])([-4 * x[1][0], x[1]]))).x[1]\\n\\nconsole.log(a);\\n\\nconsole.log(b); \"),h(\"span\",\"JavaScript\"),h(\"pre\",'function Monad2(z_10) {\\n  this.x = z_10;\\n}\\nfunction ret(v_11) {\\n  return new Monad2(v_11);\\n}\\nvar id_0 = x_12 => ret(x_12[0], x_12[1]);\\n\\nvar cube_1 = x_13 => ret([x_13[0] * x_13[0] * x_13[0], x_13[1].concat(x_13[0] * x_13[0] * x_13[0])]);\\n\\nvar square_2 = x_14 => ret([x_14[0] * x_14[0], x_14[1].concat(x_14[0] * x_14[0])]);\\nvar add_3 = a_15 => b_16 => ret([a_15 + b_16[0], b_16[1].concat(a_15 + b_16[0])]);\\nvar a_8 = square_2(add_3(3)(cube_1(ret([3, []]).x).x).x).x[1].reduce((a_17, b_18) => a_17 + b_18);\\n\\nvar b_9 = (x_19 => add_3(x_19[0])([-4 * x_19[1][0], x_19[1]]))((x_20 => add_3(x_20[1][1])([x_20[1][1], x_20[1]]))(cube_1(add_3(3)(ret([0, []]).x).x).x).x).x[1];\\n\\nconsole.log(\"a_8);\\n\\nconsole.log(b_9);  '),h(\"br\"),h(\"br\"),h(\"p\",\" Snabbdom, xstream, and most of the monads and functions presented here are available in browser developer tools consoles and scratch pads. A production site would load these as modules, but this site is for experimention and learning. \"),h(\"span.italic\",' Instances of Monad and Monad2 aren\\'t Category Theory monads. They are inspired by Haskell monads which, in turn, are inspired by Category Theory. The modified subset of the Haskell Programming Language named \"Hask\" has true Category Theory monads, but the restrictions on Haskell necessay to make Hask a true Category render it nearly useless. '),h(\"p\",\" Taking inspiration from Category Theory and replicating, to the extent feasable, some of its essential features was the stroke of genius that lifted Haskell into the realm of robust enterprise ready programming languages. The reliably concurrent atomic transactions written in Haskell made it the language of choice for several large banks. Mimicking Haskell monads in  \"),h(\"a\",{props:{href:\"http://math.andrej.com/2016/08/06/hask-is-not-a-category/\",target:\"_blank\"}},\"Hask is not a category.\"),h(\"span\",\" by Andrej Bauer and the \"),h(\"a\",{props:{href:\"#discussion\"}},\"Discussion\"),h(\"span\",\" below. They provide a convenient interface for dealing with uncertainty and side effects in a purely functional manner. Adherence to the monad laws \"),h(\"span\",\" helps instill confidence that the monads are robust, versatile, and reliable tools for isolating and chaining sequences of javascript functions. \"),h(\"h3#symbol\",\"More Random Snippits\"),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"p\",\"  Libraries and language modifications that impose constraints such as immutability, universal purity of functions, and strict typing can be useful, but this project takes a different approach. The JavaScript used herein is plain, unadorned, unrestricted Ecamascript 2018. \"),h(\"h3\",\"The Symbol-Table Version\"),h(\"p\",\" The safest way to muck around in the global space is to use interact with the Symbol table. Here is some of the code involved in the alternate composition method shown in Demonstration 2 \"),h(\"pre\",'      function autoRefresh(obj) {\\n          const handler = {\\n              set (obj, prop, value) {\\n                  diffRender();  // Forces DOM update \\n                  return Reflect.set(obj, prop, value);\\n              },\\n          };\\n          return new Proxy(obj, handler);\\n      }\\n\\n      function Bind(str, bool = false) {\\n          arBind[str] = [];\\n          if (bool) arBind[str] = autoRefresh(arBind[str]);\\n          var p;\\n          var _bind = function _bind(x) {\\n              if (x instanceof Promise) x.then(y => {\\n                  arBind[str].push(y);\\n              })\\n              else {\\n                  arBind[str].push(x)\\n              //    diffRender();\\n              }\\n              return func => {\\n                  if (func == undefined) return arBind[str];\\n                  if (typeof func !== \"function\") p = func;\\n                  else if (x instanceof Promise) p = x.then(v => func(v));\\n                  else p = func(x);\\n                  return _bind(p);\\n              };\\n          };\\n          return _bind;\\n      };\\n\\n      var diffR = function diffR (obj) {\\n          return obj = autoRefresh(obj)\\n\\n      var mBnd = (bool = false, val = \"mBnd\") => {\\n          var x = Symbol(val)      // \"val\" can be useful in debugging;\\n          var ob = {key: x, run: Bind(x)}; \\n          arBind[ob.key] = (bool) ? diffR(arBind[ob.key]) : arBind[ob.key]; \\n          return ob;\\n      }; '),h(\"p\",\" This is of little utility, but I like it: \"),h(\"pre\",{style:{color:\" #AADDAA\",fontSize:\"17px\"}},'  var ar = [x=>x, x=>x**3, x=>x+3, x=>x**2,                      \\n    x=>x*14, x=>x/1800, x=>x*6];\\n\\n  var f = v => t => t.map(g=>v=g(v)); // repeatedly mutating \"v\".\\n\\n  f(3)(ar)  //   [3, 27, 30, 900, 12600, 7, 42];  '),h(\"p\",' Objects are cloned so past states remain accessible but they are mutated inside of functions for efficiency and to keep the stack from overflowing. Functions ordinarily don\\'t interact with the environments outside of their scopes but methods might cause side effects in the objects that contain them. \"Functional programming\" in this project is about using all that the language offers to create functions that streamline applications and make them readable, maintainable, and robust. Just be sure to cause side effects, alter the contents of specific addresses in memory, and define global variables with the utmost restraint and care.'),h(\"pre\",\"\\nvar compose = (...fns) =>\\nfns.reduceRight((prevFn, nextFn) =>\\n  (...args) => nextFn(prevFn(...args)),\\n  value => value\\n);\\n\\nvar example = compose(\\nval => { console.log(1, val); return val**2; },\\nval => { console.log(2, val); return val+=4; },\\nval => { console.log(3, val); return val*=2; }); \"),h(\"button#fredButton\",Ne),h(\"a\",{props:{href:\"#top\"}},\"Back to the top\"),h(\"br\"),h(\"input#change\",diffRend),h(\"br\"),h(\"input#textbox\",`${pigText}`),h(\"div#changeDisplay\",[diffRend]),h(\"button#diffRender\",\"diffRender()\"),h(\"br\"),h(\"br\"),h(\"br\")])]))}},sources)}]);","extractedComments":[]}